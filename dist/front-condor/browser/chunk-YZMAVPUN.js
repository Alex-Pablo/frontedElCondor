import{a as Ke,b as Xe,c as Ye,d as ue}from"./chunk-FXQXGBNJ.js";import{a as le,b as me,c as pe,d as Je}from"./chunk-4HRARWIS.js";import{a as A,b as T,c as Q,d as z,e as W,f as J,g as U,i as Ue,j as Ze}from"./chunk-UI2PE7RN.js";import{a as y,b as _}from"./chunk-2PMZPAIS.js";import{f as ce}from"./chunk-MMI7D7K6.js";import"./chunk-TUXLRKPW.js";import{b as De,d as I}from"./chunk-CGZ4YKKZ.js";import"./chunk-436OHTVF.js";import"./chunk-AESYL7IM.js";import"./chunk-UZQ2FFVI.js";import{a as ve}from"./chunk-PEDW44D6.js";import{a as Le}from"./chunk-IO556VVT.js";import{d as Qe,e as S,g as ye,h as H,j,l as $,n as ze,o as q,p as We,v as G,x as N}from"./chunk-DA3IAUUD.js";import{a as E,b as be}from"./chunk-AUQWKMJ6.js";import{a as K,b as X,c as Y,d as Z,e as ee,f as te,g as ie,h as oe,i as ne,j as ae,k as re,l as we}from"./chunk-JCID66WL.js";import{ea as L}from"./chunk-JM4IHHD6.js";import{k as fe}from"./chunk-MTNE5NEP.js";import{Ab as s,Bb as v,Cb as g,Eb as k,Hb as f,Jb as M,Jc as qe,Lc as Ge,Ob as O,Oc as de,Pb as B,Qa as je,Qb as V,Ua as l,Ub as r,Va as P,Vb as u,Wb as x,aa as p,ac as h,bc as $e,ea as C,ec as ke,gc as Ne,ma as D,na as w,nb as c,pb as m,ua as He,ub as Se,xa as Re,yb as o,zb as n}from"./chunk-X4DW4WN7.js";import{a as Ve}from"./chunk-EQDQRRRY.js";var ge=class i{constructor(e){this.data=e;this.isEditMode=!!e.payload,this.loginForm=this._fb.group({name:[e.payload?.name||"",[S.required]],nameContact:[e.payload?.nameContact||"",[S.required]],phoneNumberContact:[e.payload?.phoneNumber||"",[S.required]],phoneNumberSupplier:[e.payload?.phoneNumberSupplier||""],email:[e.payload?.email||""],address:[e.payload?.address||"",[S.required]],website:[e.payload?.website||""],account:[e.payload?.numberAccount||""],nameAccount:[e.payload?.nameAccount||""],nameBanck:[e.payload?.nameBanck||""],comment:[e.payload?.comment||""],status:[e.payload?.status||"A",[S.required]]})}sBaseApi=p(_);sSweetAlert=p(y);_MatDialgoRef=p(A);_fb=p(G);isEditMode;loginForm;roles;ngOnInit(){}onSubmit(){if(this.loginForm.valid){this.sSweetAlert.showLoading();let e={Name:this.loginForm.get("name")?.value,NameContact:this.loginForm.get("nameContact")?.value,PhoneNumber:this.loginForm.get("phoneNumberContact")?.value,PhoneNumberSupplier:this.loginForm.get("phoneNumberSupplier")?.value,Email:this.loginForm.get("email")?.value,Address:this.loginForm.get("address")?.value,Website:this.loginForm.get("website")?.value,NumberAccount:this.loginForm.get("account")?.value,NameAccount:this.loginForm.get("nameAccount")?.value,NameBanck:this.loginForm.get("nameBanck")?.value,Comment:this.loginForm.get("comment")?.value,Status:this.loginForm.get("status")?.value};if(this.isEditMode){let t=this.data.payload.id;t>0&&this.sBaseApi.updateItem("supplier",e,t).subscribe(a=>{a.isSuccess?(this.sSweetAlert.showSuccess("Proveedor modificado"),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(a.error||"Error  al editar  el proveedor")})}else this.sBaseApi.addItem("supplier",e).subscribe(t=>{t.isSuccess?(this.sSweetAlert.showSuccess("Proveedor creado"),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(t.error||"Error al crear el proveedor")})}else this.sSweetAlert.showError("Campos requeridos")}getFormControl(e){let t=this.loginForm.get(e);return t instanceof j?t:null}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=C({type:i,selectors:[["app-proveedor-popup"]],standalone:!0,features:[h],decls:39,vars:12,consts:[["mat-dialog-title","",1,""],[1,"mat-typography","w-full"],[3,"formGroup"],[1,"w-full","flex","flex-wrap","md:mb-6"],[1,"w-full","md:w-1/2","px-3","mb-6","md:mb-0","sm:w-full"],["label","Nombre de empresa:*","type","text","placeholder","Ingrese de la empresa",3,"control"],["label","Nombre del proveedor (contacto):*","type","text","placeholder","Ingrese el nombre del proveedor",3,"control"],["label","Numero del proveedor de contacto:*","type","text","placeholder","Ingrese el numero",3,"control"],["label","Numero de la empresa:","type","text","placeholder","Ingrese el numero",3,"control"],["label","Email del proveedor:","type","text","placeholder","Ingrese el email",3,"control"],["label","Dirrecion de la empresa:*","type","text","placeholder","Ingrese la direccion",3,"control"],["label","Pagina web:","type","text","placeholder","Ingrese la pagian web",3,"control"],["formControlName","status"],["value","I"],["value","A"],["label","Cuenta bancaria:*","type","text","placeholder","Ingrese el numero de la cuenta",3,"control"],["label","Nombre de la cuenta:*","type","text","placeholder","Ingrese el nombre",3,"control"],["label","Nombre del banco:*","type","text","placeholder","Ingrese el nombre",3,"control"],["align","end"],[3,"click"]],template:function(t,a){t&1&&(o(0,"h2",0),r(1),n(),o(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"div",4),s(6,"app-input-field",5),n(),o(7,"div",4),s(8,"app-input-field",6),n()(),o(9,"div",3)(10,"div",4),s(11,"app-input-field",7),n(),o(12,"div",4),s(13,"app-input-field",8),n()(),o(14,"div",3)(15,"div",4),s(16,"app-input-field",9),n(),o(17,"div",4),s(18,"app-input-field",10),n()(),o(19,"div",3)(20,"div",4),s(21,"app-input-field",11),n(),o(22,"div",4)(23,"mat-radio-group",12)(24,"mat-radio-button",13),r(25,"Inactivo"),n(),o(26,"mat-radio-button",14),r(27,"Activo"),n()()()(),o(28,"div",3)(29,"div",4),s(30,"app-input-field",15),n(),o(31,"div",4),s(32,"app-input-field",16),n()(),o(33,"div",3)(34,"div",4),s(35,"app-input-field",17),n()()()(),o(36,"mat-dialog-actions",18)(37,"app-btn-close",19),f("click",function(){return a._MatDialgoRef.close(!1)}),n(),o(38,"app-btn-accept",19),f("click",function(){return a.onSubmit()}),n()()),t&2&&(l(),u(a.isEditMode?"Editar Proveedor":"Agregar Proveedor"),l(2),m("formGroup",a.loginForm),l(3),m("control",a.getFormControl("name")),l(2),m("control",a.getFormControl("nameContact")),l(3),m("control",a.getFormControl("phoneNumberContact")),l(2),m("control",a.getFormControl("phoneNumberSupplier")),l(3),m("control",a.getFormControl("email")),l(2),m("control",a.getFormControl("address")),l(3),m("control",a.getFormControl("website")),l(9),m("control",a.getFormControl("account")),l(2),m("control",a.getFormControl("nameAccount")),l(3),m("control",a.getFormControl("nameBanck")))},dependencies:[pe,me,le,ue,Xe,Ye,U,z,J,W,N,$,ye,H,q,We]})};var xe=class i{constructor(e){this.data=e}_MatDialgoRef=p(A);sBaseApi=p(_);proveedordetail;ngOnInit(){this.loadProveedoresDetails(this.data.id)}loadProveedoresDetails(e){this.sBaseApi.getDetail("supplier",e).subscribe(t=>{this.proveedordetail=t.value})}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=C({type:i,selectors:[["app-proveedor-detail-popup"]],standalone:!0,features:[h],decls:76,vars:20,consts:[[1,"p-4"],[1,"w-full","flex","flex-row","justify-between","items-center"],[1,"text-15"],[3,"click"],[1,"text-blue-500","hover:text-blue-300"],[1,"flex","flex-col"],[1,"title"],[1,"text-content"],[1,"status"],[1,"w-full","flex","flex-col"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),r(3,"Detalle del proveedor"),n(),o(4,"button",3),f("click",function(){return a._MatDialgoRef.close()}),o(5,"mat-icon",4),r(6,"close"),n()()(),o(7,"div",5)(8,"span",6),r(9,"Proveedor"),n(),o(10,"p",7),r(11),n(),o(12,"span",8),r(13),n()(),o(14,"div",9)(15,"span",6),r(16,"Nombre de la empresa"),n(),o(17,"p",7),r(18),n()(),o(19,"div",9)(20,"span",6),r(21,"Correo electronico"),n(),o(22,"p",7),r(23),n()(),o(24,"div",9)(25,"span",6),r(26,"Nombre de la cuenta"),n(),o(27,"p",7),r(28),n()(),o(29,"div",9)(30,"span",6),r(31,"Nombre del banco"),n(),o(32,"p",7),r(33),n()(),o(34,"div",9)(35,"span",6),r(36,"Numero del proveedor de contacto"),n(),o(37,"p",7),r(38),n()(),o(39,"div",9)(40,"span",6),r(41,"Pagina Web"),n(),o(42,"p",7),r(43),n()(),o(44,"div",9)(45,"span",6),r(46,"Direccion de la empresa"),n(),o(47,"p",7),r(48),n()(),o(49,"div",9)(50,"span",6),r(51,"Numero de la empresa"),n(),o(52,"p",7),r(53),n()(),o(54,"div",9)(55,"span",6),r(56,"Cuenta bancaria"),n(),o(57,"p",7),r(58),n()(),o(59,"div",9)(60,"span",6),r(61,"Comentario"),n(),o(62,"p",7),r(63),n()(),o(64,"div",9)(65,"span",6),r(66,"Proveedor creado en"),n(),o(67,"p",7),r(68),ke(69,"date"),n()(),o(70,"div",9)(71,"span",6),r(72,"Proveedor creado por"),n(),o(73,"p",7),r(74),ke(75,"date"),n()()()),t&2&&(l(11),u(a.proveedordetail==null?null:a.proveedordetail.username),l(2),u((a.proveedordetail==null?null:a.proveedordetail.status)=="A"?"Activo":"Inactivo"),l(5),u(a.proveedordetail==null?null:a.proveedordetail.name),l(5),u(a.proveedordetail==null?null:a.proveedordetail.email),l(5),u(a.proveedordetail==null?null:a.proveedordetail.nameAccount),l(5),u(a.proveedordetail==null?null:a.proveedordetail.nameBanck),l(5),u(a.proveedordetail==null?null:a.proveedordetail.phoneNumber),l(5),u(a.proveedordetail==null?null:a.proveedordetail.website),l(5),u(a.proveedordetail==null?null:a.proveedordetail.address),l(5),u(a.proveedordetail==null?null:a.proveedordetail.phoneNumberSupplier),l(5),u(a.proveedordetail==null?null:a.proveedordetail.numberAccount),l(5),u(a.proveedordetail==null?null:a.proveedordetail.description),l(5),u(Ne(69,14,a.proveedordetail==null?null:a.proveedordetail.created_at,"short")),l(6),u(Ne(75,17,a.proveedordetail==null?null:a.proveedordetail.created_by,"short")))},dependencies:[I,ce,E,de,Ge],styles:[".title[_ngcontent-%COMP%]{font-size:12px;color:#73726d}.text-content[_ngcontent-%COMP%]{font-size:14px;color:#46433c;margin:3px}.status[_ngcontent-%COMP%]{font-size:11px;margin:-8px 3px 3px;color:#73726d}"]})};var et=["sidenav"];function tt(i,e){i&1&&(o(0,"th",16),r(1,"ID"),n())}function it(i,e){if(i&1&&(o(0,"td",17),r(1),n()),i&2){let t=e.$implicit;l(),u(t.id)}}function ot(i,e){i&1&&(o(0,"th",16),r(1," Nombre de la empresa "),n())}function nt(i,e){if(i&1&&(o(0,"td",17),r(1),n()),i&2){let t=e.$implicit;l(),x(" ",t.name," ")}}function at(i,e){i&1&&(o(0,"th",16),r(1," Nombre persona de contacto "),n())}function rt(i,e){if(i&1&&(o(0,"td",17),r(1),n()),i&2){let t=e.$implicit;l(),x(" ",t.nameContact," ")}}function lt(i,e){i&1&&(o(0,"th",16),r(1," Numero de telefono de contacto "),n())}function mt(i,e){if(i&1&&(o(0,"td",17),r(1),n()),i&2){let t=e.$implicit;l(),x(" ",t.phoneNumber," ")}}function pt(i,e){i&1&&(o(0,"th",16),r(1," Estado "),n())}function st(i,e){i&1&&r(0," Activo ")}function dt(i,e){i&1&&r(0," Inactivo ")}function ct(i,e){if(i&1&&(o(0,"td",17),c(1,st,1,0)(2,dt,1,0),n()),i&2){let t=e.$implicit;l(),Se(t.status=="A"?1:t.status=="I"?2:-1)}}function ut(i,e){i&1&&(o(0,"th",16),r(1,"acciones"),n())}function ft(i,e){if(i&1){let t=k();o(0,"td",18)(1,"div",19)(2,"button",20),f("click",function(){let d=D(t).$implicit,b=M();return w(b.onViewDetails(d.id))}),o(3,"mat-icon"),r(4,"visibility"),n()(),o(5,"button",21),f("click",function(){let d=D(t).$implicit,b=M();return w(b.onEdit(d))}),o(6,"mat-icon"),r(7,"edit"),n()(),o(8,"button",22),f("click",function(){let d=D(t).$implicit,b=M();return w(b.onDelete(d.id))}),o(9,"mat-icon"),r(10,"delete"),n()()()()}}function vt(i,e){i&1&&s(0,"tr",23)}function gt(i,e){i&1&&s(0,"tr",24)}var Ee=class i{displayedColumns=["id","name","nameContact","phoneNumber","status","acciones"];sTitle=p(L);_matDialog=p(Q);searchMessage="Buscar proveedor";dataSource;sSweetalert=p(y);sBaseApi=p(_);selectedId;sidenav;onSearch(e){}ngOnInit(){this.sTitle.setTitle("proveedores"),this.getAllProveedores()}closeSidenav(){this.sidenav.close()}onOpenModal(){this._matDialog.open(ge,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{}}).afterClosed().subscribe(e=>{e&&this.getAllProveedores()})}onDelete(e){this.sSweetalert.showConfirmation(`Quieres eliminar al proveedor: ${e}`,()=>{this.sBaseApi.removeItem("supplier",e).subscribe(t=>{t.isSuccess?(this.sSweetalert.showSuccess("Proveedor eliminado"),this.getAllProveedores()):this.sSweetalert.showError("No se pudo eliminar el proveedor")})})}onEdit(e){this._matDialog.open(ge,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{payload:e}}).afterClosed().subscribe(t=>{t&&this.getAllProveedores()})}onViewDetails(e){this._matDialog.open(xe,{data:{id:e},width:"350px",height:"100vh",maxHeight:"100vh",position:{right:"0"},panelClass:"dialog-detail"})}getAllProveedores(){this.sBaseApi.getItems("supplier").subscribe(e=>{e.isSuccess&&(this.dataSource=e.value)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-proveedore"]],viewQuery:function(t,a){if(t&1&&O(et,5),t&2){let d;B(d=V())&&(a.sidenav=d.first)}},standalone:!0,features:[h],decls:27,vars:3,consts:[[1,"flex","flex-wrap","justify-end","gap-2","mb-4"],["type","button",1,"btn-add",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["class","itemHeader","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","nameContact"],["matColumnDef","phoneNumber"],["matColumnDef","status"],["matColumnDef","acciones"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"itemHeader"],["mat-cell",""],["mat-cell","",1,"actions-cell"],[1,"actions-container"],["mat-icon-button","",1,"btnVer",3,"click"],["mat-icon-button","",1,"btnEditar",3,"click"],["mat-icon-button","",1,"btnEliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){t&1&&(o(0,"div",0)(1,"button",1),f("click",function(){return a.onOpenModal()}),o(2,"mat-icon"),r(3,"add"),n()()(),o(4,"div",2)(5,"div",3)(6,"table",4),v(7,5),c(8,tt,2,0,"th",6)(9,it,2,1,"td",7),g(),v(10,8),c(11,ot,2,0,"th",6)(12,nt,2,1,"td",7),g(),v(13,9),c(14,at,2,0,"th",6)(15,rt,2,1,"td",7),g(),v(16,10),c(17,lt,2,0,"th",6)(18,mt,2,1,"td",7),g(),v(19,11),c(20,pt,2,0,"th",6)(21,ct,3,1,"td",7),g(),v(22,12),c(23,ut,2,0,"th",6)(24,ft,11,0,"td",13),g(),c(25,vt,1,0,"tr",14)(26,gt,1,0,"tr",15),n()()()),t&2&&(l(6),m("dataSource",a.dataSource),l(19),m("matHeaderRowDef",a.displayedColumns),l(),m("matRowDefColumns",a.displayedColumns))},dependencies:[be,E,I,re,K,Y,ie,Z,X,oe,ee,te,ne,ae]})};function Ct(i,e){if(i&1&&(o(0,"div",1)(1,"label",2),r(2),n(),s(3,"textarea",3),n()),i&2){let t=M();l(2),u(t.label()),l(),m("formControl",t.control)("placeholder",t.placeholder())}}var se=class i{label=Re.required();placeholder=Re();control;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-input-text-area"]],inputs:{label:[1,"label"],placeholder:[1,"placeholder"],control:"control"},standalone:!0,features:[h],decls:1,vars:1,consts:[["class","w-full",4,"ngIf"],[1,"w-full"],["for","message",1,"block"],["id"," message","rows","4",1,"block","p-2.5","w-full","text-sm","rounded-lg","border","border-gray-300","focus:outline-none","focus:border-teal-800",3,"formControl","placeholder"]],template:function(t,a){t&1&&c(0,Ct,4,3,"div",0),t&2&&m("ngIf",a.control)},dependencies:[N,Qe,ye,ze,qe]})};var Ce=class i{constructor(e){this.data=e;this.isEditMode=!!e.payload,this.loginForm=this._fb.group({profileImg:[null],name:[e.payload?.name||"",[S.required]],code:[e.payload?.code||""],key:[e.payload?.key||""],description:[e.payload?.description||""],purchasePrice:[e.payload?.purchasePrice||"0"],salePrice:[e.payload?.salePrice||"0"],brand:[e.payload?.brand||""],idCategory:[e.payload?.id_category||"",[S.required]],idSupplier:[e.payload?.id_suplier||"",[S.required]],idUnit:[e.payload?.id_unit||"",[S.required]],stock:[e.payload?.stock||"0"],stockMin:[e.payload?.stockMin||"0"],status:[e.payload?.status||"P",[S.required]]}),this.imgUrl=e.payload?.img}sAuth=p(Le);sBaseApi=p(_);sSweetAlert=p(y);_MatDialgoRef=p(A);_fb=p(G);isEditMode;loginForm;imgUrl;fileToUpload;aCategories;aSuppliers;aUnits;aStatus;ngOnInit(){this.getImgProfile(),this.getCategory(),this.getSuppliers(),this.getunits(),this.getStatus()}onSubmit(){if(this.loginForm.valid){this.sSweetAlert.showLoading();let e=new FormData;if(e.append("Name",this.loginForm.value.name),e.append("Code",this.loginForm.value.code),e.append("Key",this.loginForm.value.key),e.append("Description",this.loginForm.value.description),e.append("PurchasePrice",this.loginForm.value.purchasePrice),e.append("SalePrice",this.loginForm.value.salePrice),e.append("Brand",this.loginForm.value.brand),e.append("Id_category",this.loginForm.value.idCategory),e.append("Id_suplier",this.loginForm.value.idSupplier),e.append("Id_unit",this.loginForm.value.idUnit),e.append("Status",this.loginForm.value.status),e.append("Stock",this.loginForm.value.stock),e.append("StockMin",this.loginForm.value.stockMin),e.append("Img",this.loginForm.value.profileImg),this.isEditMode){let t=this.data.payload.id;t>0&&this.sBaseApi.updateItem("Product",e,t).subscribe(a=>{a.isSuccess?(this.sSweetAlert.closeLoading(),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(a.error||"Error  al editar el producto")})}else this.sBaseApi.addItem("Product",e).subscribe(t=>{t.isSuccess?(this.sSweetAlert.closeLoading(),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(t.error||"Error al crear el producto")})}}getCategory(){this.sBaseApi.getItems("Category").subscribe(e=>{this.aCategories=e.value})}getSuppliers(){this.sBaseApi.getItems("Supplier").subscribe(e=>{this.aSuppliers=e.value})}getunits(){this.sBaseApi.getItems("unitOfMeasure").subscribe(e=>{e.isSuccess&&(this.aUnits=e.value)})}getStatus(){this.aStatus=[{id:"S",name:"Disponible (En inventario y listo para la venta)"},{id:"P",name:"Registrado (sin stock ni pedido)"}]}getFormControl(e){let t=this.loginForm.get(e);return t instanceof j?t:null}onCloseModal(){this._MatDialgoRef.close()}onFileChange(e){let t=e.target.files[0];this.fileToUpload=t,this.loginForm.patchValue({profileImg:t});let a=new FileReader;a.onload=d=>{this.imgUrl=d.target.result},a.readAsDataURL(this.fileToUpload)}getImgProfile(){return this.loginForm.value.profileImg}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=C({type:i,selectors:[["app-producto-popup"]],standalone:!0,features:[h],decls:42,vars:21,consts:[["mat-dialog-title","",1,""],[1,"mat-typography","w-full"],[3,"formGroup"],[1,"flex","flex-wrap","md:mb-6"],[1,"w-full","md:w-1/2","px-3","mb-6","md:mb-0","sm:w-full"],["label","Nombre del producto:*","type","text","placeholder","Ingrese el nonbre del producto",3,"control"],[1,"w-full","md:w-1/4","px-3","mb-6","md:mb-0","sm:w-full"],["label","Codigo:","type","text","placeholder","Codigo de producto",3,"control"],["label","Clave:","type","text","placeholder","Clave del producto",3,"control"],["label","Marca del producto:","type","text","placeholder","Ingrese la marca del producto",3,"control"],["label","Precio de aquisicion:","type","number","placeholder","Ingrese el precio de aquisicion",3,"control"],["label","Precio de venta:","type","number","placeholder","Ingrese el precio de venta",3,"control"],[1,"w-full","px-3","mb-6","md:mb-0","sm:w-full"],["label","Descripcion del prodcuto:*","placeholder","Descripcion",3,"control"],["label","Categoria:*","placeholder","Seleccion una categoria",3,"options","control"],["label","Proveedor:*","placeholder","Selecione un proveedor",3,"options","control"],["label","Unidad de medida:*","placeholder","Seleccion una unidad del producto",3,"options","control"],["label","Estado:*","placeholder","Selecione un estado",3,"options","control"],["label","En stock:","type","number","placeholder","Cantidad en stock",3,"control"],["label","Stock minimo:","type","number","placeholder","Cantidad minimo de stock",3,"control"],["label","Agregar imagen del producto",3,"control","imageUrl"],["align","end"],[3,"click"]],template:function(t,a){t&1&&(o(0,"h2",0),r(1),n(),o(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"div",4),s(6,"app-input-field",5),n(),o(7,"div",6),s(8,"app-input-field",7),n(),o(9,"div",6),s(10,"app-input-field",8),n()(),o(11,"div",3)(12,"div",4),s(13,"app-input-field",9),n(),o(14,"div",6),s(15,"app-input-field",10),n(),o(16,"div",6),s(17,"app-input-field",11),n()(),o(18,"div",3)(19,"div",12),s(20,"app-input-text-area",13),n()(),o(21,"div",3)(22,"div",4),s(23,"app-input-select",14),n(),o(24,"div",4),s(25,"app-input-select",15),n()(),o(26,"div",3)(27,"div",4),s(28,"app-input-select",16),n(),o(29,"div",4),s(30,"app-input-select",17),n()(),o(31,"div",3)(32,"div",4),s(33,"app-input-field",18),n(),o(34,"div",4),s(35,"app-input-field",19),n()(),o(36,"div",3)(37,"div",3),s(38,"app-image-uploader",20),n()()()(),o(39,"mat-dialog-actions",21)(40,"app-btn-close",22),f("click",function(){return a.onCloseModal()}),n(),o(41,"app-btn-accept",22),f("click",function(){return a.onSubmit()}),n()()),t&2&&(l(),u(a.isEditMode?"Editar producto":"Crear un nuevo producto"),l(2),m("formGroup",a.loginForm),l(3),m("control",a.getFormControl("name")),l(2),m("control",a.getFormControl("code")),l(2),m("control",a.getFormControl("key")),l(3),m("control",a.getFormControl("brand")),l(2),m("control",a.getFormControl("purchasePrice")),l(2),m("control",a.getFormControl("salePrice")),l(3),m("control",a.getFormControl("description")),l(3),m("options",a.aCategories)("control",a.getFormControl("idCategory")),l(2),m("options",a.aSuppliers)("control",a.getFormControl("idSupplier")),l(3),m("options",a.aUnits)("control",a.getFormControl("idUnit")),l(2),m("options",a.aStatus)("control",a.getFormControl("status")),l(3),m("control",a.getFormControl("stock")),l(2),m("control",a.getFormControl("stockMin")),l(3),m("control",a.getFormControl("profileImg"))("imageUrl",a.imgUrl))},dependencies:[U,z,J,W,pe,Je,se,le,me,N,$,H,q,Ke,ue]})};var Ie=class i{constructor(e){this.data=e}_MatDialgoRef=p(A);ProductDetail;sBaseApi=p(_);ngOnInit(){this.loadProductDetails(this.data.id)}loadProductDetails(e){this.sBaseApi.getDetail("product",e).subscribe(t=>{this.ProductDetail=t.value})}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=C({type:i,selectors:[["app-producto-detail-popup"]],standalone:!0,features:[h],decls:7,vars:0,consts:[[1,"p-4"],[1,"w-full","flex","flex-row","justify-between","items-center"],[1,"text-15"],[3,"click"],[1,"text-blue-500","hover:text-blue-300"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),r(3,"Detalle del producto"),n(),o(4,"button",3),f("click",function(){return a._MatDialgoRef.close()}),o(5,"mat-icon",4),r(6,"close"),n()()()())},dependencies:[I,ce,E,de]})};var ht=["sidenav"],_t=()=>[5,10,20];function St(i,e){i&1&&(o(0,"th",20),r(1,"ID"),n())}function bt(i,e){if(i&1&&(o(0,"td",21),r(1),n()),i&2){let t=e.$implicit;l(),u(t.id)}}function yt(i,e){i&1&&(o(0,"th",20),r(1,"Imagen"),n())}function Dt(i,e){if(i&1&&(o(0,"td",21),s(1,"img",22),n()),i&2){let t=e.$implicit;l(),m("src",t.img,je)}}function wt(i,e){i&1&&(o(0,"th",20),r(1,"Nombre"),n())}function Mt(i,e){if(i&1&&(o(0,"td",21),r(1),n()),i&2){let t=e.$implicit;l(),u(t.name)}}function xt(i,e){i&1&&(o(0,"th",20),r(1,"Codigo"),n())}function Et(i,e){if(i&1&&(o(0,"td",21),r(1),n()),i&2){let t=e.$implicit;l(),u(t.code)}}function It(i,e){i&1&&(o(0,"th",20),r(1,"Clave"),n())}function Pt(i,e){if(i&1&&(o(0,"td",21),r(1),n()),i&2){let t=e.$implicit;l(),u(t.key)}}function At(i,e){i&1&&(o(0,"th",20),r(1,"Estado"),n())}function Tt(i,e){i&1&&r(0," Disponible ")}function Ft(i,e){i&1&&r(0," En proceso ")}function Rt(i,e){i&1&&r(0," Registrado ")}function kt(i,e){if(i&1&&(o(0,"td",21),c(1,Tt,1,0)(2,Ft,1,0)(3,Rt,1,0),n()),i&2){let t=e.$implicit;l(),Se(t.status=="S"?1:t.status=="E"?2:t.status=="P"?3:-1)}}function Nt(i,e){i&1&&(o(0,"th",20),r(1,"Precio de aquision"),n())}function Ut(i,e){if(i&1&&(o(0,"td",21),r(1),n()),i&2){let t=e.$implicit;l(),u(t.purchasePrice)}}function Ot(i,e){i&1&&(o(0,"th",20),r(1,"Precio de venta"),n())}function Bt(i,e){if(i&1&&(o(0,"td",21),r(1),n()),i&2){let t=e.$implicit;l(),u(t.salePrice)}}function Vt(i,e){i&1&&(o(0,"th",20),r(1,"Acciones"),n())}function Ht(i,e){if(i&1){let t=k();o(0,"td",23)(1,"div",24)(2,"button",25),f("click",function(){let d=D(t).$implicit,b=M();return w(b.onViewDetails(d.id))}),o(3,"mat-icon"),r(4,"visibility"),n()(),o(5,"button",26),f("click",function(){let d=D(t).$implicit,b=M();return w(b.onEdit(d))}),o(6,"mat-icon"),r(7,"edit"),n()()()()}}function jt(i,e){i&1&&s(0,"tr",27)}function $t(i,e){i&1&&s(0,"tr",28)}var Pe=class i{_BaseApi=p(_);searchInput=null;selectedStartDate;sTitle=p(L);sidenav;_matDialog=p(Q);dataSource=new we;selectedEndDate;searchMessage="Buscar producto";sSweetalert=p(y);aProducts;totalItems=0;dItemDateEnd;dItemDateStart;paginatorSubscription;paginator;constructor(){this.sTitle.setTitle("Catalogo - Productos")}ngAfterViewInit(){this.paginatorSubscription=this.paginator.page.subscribe(()=>this.loadItems()),this.loadItems(),this.paginator.page.subscribe(()=>this.loadItems()),this.loadItems()}filterItems(){this._BaseApi.filter("producto",this.searchInput,this.selectedStartDate,this.selectedEndDate).subscribe(e=>{this.dataSource.data=e.value})}clearFilters(){this.searchInput=null,this.selectedEndDate=null,this.selectedStartDate=null,this.paginator.pageIndex=0,this.loadItems()}loadItems(){let e=this.paginator.pageIndex,t=this.paginator.pageSize;this._BaseApi.getItemsPagination("product",e+1,t).subscribe(a=>{this.dataSource.data=a.items,this.totalItems=a.pagination.TotalItemCount,this.paginator.pageIndex=a.pagination.CurrentPage-1,this.paginator.length=this.totalItems})}handleDateRangeChange(e){this.dItemDateEnd=e.endDate,this.dItemDateStart=e.startDate}ngOnInit(){}onOpenModal(){this._matDialog.open(Ce,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{}}).afterClosed().subscribe(e=>{e&&this.loadItems()})}onDelete(e){}onEdit(e){this._matDialog.open(Ce,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{payload:e}}).afterClosed().subscribe(t=>{t&&this.loadItems()})}onSearch(e){}onViewDetails(e){this._matDialog.open(Ie,{data:{id:e},width:"350px",height:"100vh",maxHeight:"100vh",position:{right:"0"},panelClass:"dialog-detail"})}closeSidenav(){this.sidenav.close()}getProducts(){this._BaseApi.getItems("Product").subscribe(e=>{e.isSuccess&&(this.dataSource=e.value)})}displayedColumns=["id","img","name","code","key","status","purchasePrice","salePrice","acciones"];static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-product"]],viewQuery:function(t,a){if(t&1&&(O(ht,5),O(Ue,5)),t&2){let d;B(d=V())&&(a.sidenav=d.first),B(d=V())&&(a.paginator=d.first)}},standalone:!0,features:[h],decls:37,vars:6,consts:[[1,"list-inputs"],["type","button",1,"btn-add",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["class","itemHeader","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","img"],["matColumnDef","name"],["matColumnDef","code"],["matColumnDef","key"],["matColumnDef","status"],["matColumnDef","purchasePrice"],["matColumnDef","salePrice"],["matColumnDef","acciones"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSizeOptions"],["mat-header-cell","",1,"itemHeader"],["mat-cell",""],["alt","",1,"imgFoto",3,"src"],["mat-cell","",1,"actions-cell"],[1,"actions-container"],["mat-icon-button","",1,"btnVer",3,"click"],["mat-icon-button","",1,"btnEditar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){t&1&&(o(0,"div",0)(1,"button",1),f("click",function(){return a.onOpenModal()}),o(2,"mat-icon"),r(3,"add"),n()()(),o(4,"div",2)(5,"div",3)(6,"table",4),v(7,5),c(8,St,2,0,"th",6)(9,bt,2,1,"td",7),g(),v(10,8),c(11,yt,2,0,"th",6)(12,Dt,2,1,"td",7),g(),v(13,9),c(14,wt,2,0,"th",6)(15,Mt,2,1,"td",7),g(),v(16,10),c(17,xt,2,0,"th",6)(18,Et,2,1,"td",7),g(),v(19,11),c(20,It,2,0,"th",6)(21,Pt,2,1,"td",7),g(),v(22,12),c(23,At,2,0,"th",6)(24,kt,4,1,"td",7),g(),v(25,13),c(26,Nt,2,0,"th",6)(27,Ut,2,1,"td",7),g(),v(28,14),c(29,Ot,2,0,"th",6)(30,Bt,2,1,"td",7),g(),v(31,15),c(32,Vt,2,0,"th",6)(33,Ht,8,0,"td",16),g(),c(34,jt,1,0,"tr",17)(35,$t,1,0,"tr",18),n(),s(36,"mat-paginator",19),n()()),t&2&&(l(6),m("dataSource",a.dataSource),l(28),m("matHeaderRowDef",a.displayedColumns),l(),m("matRowDefColumns",a.displayedColumns),l(),m("length",a.totalItems)("pageSizeOptions",$e(5,_t)))},dependencies:[re,K,Y,ie,Z,X,oe,ee,te,ne,ae,E,be,U,I,Ue,Ze],styles:[".list-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;margin:0 0 20px;gap:10px}.custom-dialog-container[_ngcontent-%COMP%]{background-color:red!important;padding:30px;width:30px!important}"]})};var he=class i{constructor(e){this.data=e;this.isEditMode=!!e.payload,this.loginForm=this._fb.group({nombre:[e.payload?.name||"",[S.required]],descripcion:[e.payload?.description||"",[S.required]]})}sBaseApi=p(_);sSweetAlert=p(y);_MatDialgoRef=p(A);_fb=p(G);isEditMode;loginForm;ngOnInit(){}onSubmit(){if(this.loginForm.valid){this.sSweetAlert.showLoading();let e={Name:this.loginForm.get("nombre")?.value,Description:this.loginForm.get("descripcion")?.value};if(this.isEditMode){let t=this.data.payload.id;t>0&&this.sBaseApi.updateItem("Category",e,t).subscribe(a=>{a.isSuccess?(this.sSweetAlert.closeLoading(),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(a.error||"Error  al editar el categoria")})}else this.sBaseApi.addItem("Category",e).subscribe(t=>{t.isSuccess?(this.sSweetAlert.closeLoading(),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(t.error||"Error al crear la categoria")})}else this.sSweetAlert.showError("Campos requeridos")}getFormControl(e){let t=this.loginForm.get(e);return t instanceof j?t:null}onCloseModal(){this._MatDialgoRef.close()}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=C({type:i,selectors:[["app-categoria-popup"]],standalone:!0,features:[h],decls:13,vars:4,consts:[["mat-dialog-title","",1,""],[1,"mat-typography","w-full"],[3,"formGroup"],[1,"flex","flex-wrap","md:mb-6"],[1,"w-full","md:w-1/2","px-3","mb-6","md:mb-0","sm:w-full"],["label","Nombre:*","type","text","placeholder","Ingrese el nombre",3,"control"],[1,"w-full","px-3","mb-6","md:mb-0","sm:w-full"],["label","Descripcion:*","placeholder","Ingrese la descipcion",3,"control"],["align","end"],[3,"click"]],template:function(t,a){t&1&&(o(0,"h2",0),r(1),n(),o(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"div",4),s(6,"app-input-field",5),n()(),o(7,"div",3)(8,"div",6),s(9,"app-input-text-area",7),n()()()(),o(10,"mat-dialog-actions",8)(11,"app-btn-close",9),f("click",function(){return a.onCloseModal()}),n(),o(12,"app-btn-accept",9),f("click",function(){return a.onSubmit()}),n()()),t&2&&(l(),u(a.isEditMode?"Editar categoria":"Crear nueva categoria"),l(2),m("formGroup",a.loginForm),l(3),m("control",a.getFormControl("nombre")),l(3),m("control",a.getFormControl("descripcion")))},dependencies:[U,z,J,W,pe,se,le,me,N,$,H,q,ue]})};var Ae=class i{id;closeSidenav=new He;categoriaDetail;close(){console.log("sii"),this.closeSidenav.emit()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-categoria-detail-popup"]],inputs:{id:"id"},outputs:{closeSidenav:"closeSidenav"},standalone:!0,features:[h],decls:18,vars:2,consts:[[1,"p-4"],[1,"w-full","flex","flex-row","justify-between","items-center"],[1,"text-15"],[3,"click"],[1,"text-blue-500","hover:text-blue-300"],[1,"mt-6","p-3","flex","flex-col","gap-3"],[1,"w-full","flex","flex-col"],[1,"title"],[1,"text-content"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),r(3,"Detalle de la categoria"),n(),o(4,"button",3),f("click",function(){return a.close()}),o(5,"mat-icon",4),r(6,"close"),n()()(),o(7,"div",5)(8,"div",6)(9,"span",7),r(10,"id de lacategoria"),n(),o(11,"p",8),r(12),n(),o(13,"div",6)(14,"span",7),r(15,"nombre de la categoria"),n(),o(16,"p",8),r(17),n()()()()()),t&2&&(l(12),u(a.categoriaDetail==null?null:a.categoriaDetail.id),l(5),u(a.categoriaDetail==null?null:a.categoriaDetail.name))},dependencies:[I,ce,E,de]})};var Gt=["sidenav"];function Lt(i,e){i&1&&(o(0,"th",17),r(1,"Id"),n())}function Qt(i,e){if(i&1&&(o(0,"td",18),r(1),n()),i&2){let t=e.$implicit;l(),x(" ",t.id," ")}}function zt(i,e){i&1&&(o(0,"th",17),r(1," Nombre de categoria "),n())}function Wt(i,e){if(i&1&&(o(0,"td",18),r(1),n()),i&2){let t=e.$implicit;l(),x(" ",t.name," ")}}function Jt(i,e){i&1&&(o(0,"th",17),r(1," Desripcion de la categoria "),n())}function Kt(i,e){if(i&1&&(o(0,"td",18),r(1),n()),i&2){let t=e.$implicit;l(),x(" ",t.description," ")}}function Xt(i,e){i&1&&(o(0,"th",17),r(1,"acciones"),n())}function Yt(i,e){if(i&1){let t=k();o(0,"td",19)(1,"div",20)(2,"button",21),f("click",function(){let d=D(t).$implicit,b=M();return w(b.onEdit(d))}),o(3,"mat-icon"),r(4,"edit"),n()(),o(5,"button",22),f("click",function(){let d=D(t).$implicit,b=M();return w(b.onDelete(d.id))}),o(6,"mat-icon"),r(7,"delete"),n()()()()}}function Zt(i,e){i&1&&s(0,"tr",23)}function ei(i,e){i&1&&s(0,"tr",24)}var Te=class i{sBaseApi=p(_);displayedColumns=["id","name","description","acciones"];sTitle=p(L);_matDialog=p(Q);searchMessage="Buscar categor\xEDa";dataSource;selectedId;sidenav;isOpen=!1;sSweetalert=p(y);ngOnInit(){this.sTitle.setTitle("Categorias de productos"),this.getAllCategoria()}onSearch(e){}onViewDetails(e){this.selectedId=e,this.sidenav?this.sidenav.open():console.error("El sidenav no est\xE1 definido.")}onOpenModal(){this._matDialog.open(he,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{}}).afterClosed().subscribe(e=>{e&&this.getAllCategoria()})}toggleDropdown(e){let t=e.target.nextElementSibling;t&&t.classList.toggle("show")}closeModal(){this.isOpen=!1}onDelete(e){this.sSweetalert.showConfirmation(`Quieres eliminar la categoria: ${e}`,()=>{this.sBaseApi.removeItem("Category",e).subscribe(t=>{t.isSuccess?(this.sSweetalert.showSuccess("Categoria eliminada"),this.getAllCategoria()):this.sSweetalert.showError(t.error||"Hubo un errro al eliminar la categoria ")})})}onEdit(e){this._matDialog.open(he,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{payload:e}}).afterClosed().subscribe(t=>{t&&this.getAllCategoria()})}closeSidenav(){this.sidenav.close()}getAllCategoria(){this.sBaseApi.getItems("Category").subscribe(e=>{e.isSuccess&&(this.dataSource=e.value)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-categoria"]],viewQuery:function(t,a){if(t&1&&O(Gt,5),t&2){let d;B(d=V())&&(a.sidenav=d.first)}},standalone:!0,features:[h],decls:24,vars:5,consts:[["sidenav",""],[1,"flex","flex-wrap","justify-end","gap-2","mb-4"],["type","button",1,"btn-add",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["class","itemHeader","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","acciones"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","over","position","end",1,"custom-sidenav",3,"opened"],[3,"closeSidenav","id"],["mat-header-cell","",1,"itemHeader"],["mat-cell",""],["mat-cell","",1,"actions-cell"],[1,"actions-container"],["mat-icon-button","",1,"btnEditar",3,"click"],["mat-icon-button","",1,"btnEliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){if(t&1){let d=k();o(0,"div",1)(1,"button",2),f("click",function(){return D(d),w(a.onOpenModal())}),o(2,"mat-icon"),r(3,"add"),n()()(),o(4,"div",3)(5,"div",4)(6,"table",5),v(7,6),c(8,Lt,2,0,"th",7)(9,Qt,2,1,"td",8),g(),v(10,9),c(11,zt,2,0,"th",7)(12,Wt,2,1,"td",8),g(),v(13,10),c(14,Jt,2,0,"th",7)(15,Kt,2,1,"td",8),g(),v(16,11),c(17,Xt,2,0,"th",7)(18,Yt,8,0,"td",12),g(),c(19,Zt,1,0,"tr",13)(20,ei,1,0,"tr",14),n()()(),o(21,"mat-sidenav",15,0)(23,"app-categoria-detail-popup",16),f("closeSidenav",function(){return D(d),w(a.closeSidenav())}),n()()}t&2&&(l(6),m("dataSource",a.dataSource),l(13),m("matHeaderRowDef",a.displayedColumns),l(),m("matRowDefColumns",a.displayedColumns),l(),m("opened",!1),l(2),m("id",a.selectedId))},dependencies:[E,re,K,Y,ie,Z,X,oe,ee,te,ne,ae,I,De,Ae]})};var _e=class i{constructor(e){this.data=e;this.isEditMode=!!e.payload,this.unitForm=this._fb.group({name:[e.payload?.name||"",[S.required]],abbreviation:[e.payload?.abbreviation||"",[S.required]],description:[e.payload?.description||"",[S.required]]})}sBaseApi=p(_);sSweetAlert=p(y);_MatDialgoRef=p(A);_fb=p(G);isEditMode;unitForm;ngOnInit(){}onSubmit(){if(this.unitForm.valid){this.sSweetAlert.showLoading();let e={name:this.unitForm.get("name")?.value,abbreviation:this.unitForm.get("abbreviation")?.value,description:this.unitForm.get("description")?.value};this.sBaseApi.addItem("unitOfMeasure",e).subscribe(t=>{this.sSweetAlert.closeLoading(),t.isSuccess?this._MatDialgoRef.close(!0):this.sSweetAlert.showError(t.error||"Error al crear la unidad de medida")},t=>{this.sSweetAlert.closeLoading(),console.error("Error al crear:",t),this.sSweetAlert.showError("Error al crear la unidad de medida: "+t.message)})}else this.sSweetAlert.showError("Por favor, completa todos los campos requeridos.")}getFormControl(e){let t=this.unitForm.get(e);return t instanceof j?t:null}onCloseModal(){this._MatDialgoRef.close()}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=C({type:i,selectors:[["app-unitofmeasure-popup"]],standalone:!0,features:[h],decls:16,vars:5,consts:[["mat-dialog-title","",1,""],[1,"mat-typography","w-full"],[3,"formGroup"],[1,"flex","flex-wrap","md:mb-6"],[1,"w-full","md:w-1/2","px-3","mb-6","md:mb-0","sm:w-full"],["label","Nombre:*","type","text","placeholder","Ingrese el nombre",3,"control"],["label","Abreviatura:*","type","text","placeholder","Ingrese la abreviatura",3,"control"],[1,"w-full","px-3","mb-6","md:mb-0","sm:w-full"],["label","Descripci\xF3n:*","placeholder","Ingrese la descripci\xF3n",3,"control"],["align","end"],[3,"click"]],template:function(t,a){t&1&&(o(0,"h2",0),r(1),n(),o(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"div",4),s(6,"app-input-field",5),n()(),o(7,"div",3)(8,"div",4),s(9,"app-input-field",6),n()(),o(10,"div",3)(11,"div",7),s(12,"app-input-text-area",8),n()()()(),o(13,"mat-dialog-actions",9)(14,"app-btn-close",10),f("click",function(){return a.onCloseModal()}),n(),o(15,"app-btn-accept",10),f("click",function(){return a.onSubmit()}),n()()),t&2&&(l(),u(a.isEditMode?"Crear Unidad de Medida":""),l(2),m("formGroup",a.unitForm),l(3),m("control",a.getFormControl("name")),l(3),m("control",a.getFormControl("abbreviation")),l(3),m("control",a.getFormControl("description")))},dependencies:[U,z,J,W,pe,se,le,me,N,$,H,q]})};var ti=["sidenav"];function ii(i,e){i&1&&(o(0,"th",18),r(1,"Id"),n())}function oi(i,e){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let t=e.$implicit;l(),x(" ",t.id," ")}}function ni(i,e){i&1&&(o(0,"th",18),r(1," Nombre de la Unidad "),n())}function ai(i,e){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let t=e.$implicit;l(),x(" ",t.name," ")}}function ri(i,e){i&1&&(o(0,"th",18),r(1," Abreviaci\xF3n "),n())}function li(i,e){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let t=e.$implicit;l(),x(" ",t.abbreviation," ")}}function mi(i,e){i&1&&(o(0,"th",18),r(1," Descripci\xF3n "),n())}function pi(i,e){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let t=e.$implicit;l(),x(" ",t.description," ")}}function si(i,e){i&1&&(o(0,"th",18),r(1," Productos "),n())}function di(i,e){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let t=e.$implicit;l(),x(" ",t.products," ")}}function ci(i,e){i&1&&(o(0,"th",18),r(1," Acciones "),n())}function ui(i,e){if(i&1){let t=k();o(0,"td",20)(1,"div",21)(2,"button",22),f("click",function(){let d=D(t).$implicit,b=M();return w(b.onDelete(d))}),o(3,"mat-icon"),r(4,"delete"),n()()()()}}function fi(i,e){i&1&&s(0,"tr",23)}function vi(i,e){i&1&&s(0,"tr",24)}var Fe=class i{sBaseApi=p(_);sTitle=p(L);sSweetalert=p(y);_matDialog=p(Q);displayedColumns=["id","name","abbreviation","description","acciones"];dataSource=new we([]);selectedUnitOfMeasure=null;searchMessage="Buscar unidad de medida";sidenav;ngOnInit(){this.sTitle.setTitle("Unidades de Medida"),this.getAllUnitsOfMeasure()}getAllUnitsOfMeasure(){this.sBaseApi.getItems("unitOfMeasure").subscribe(e=>{e.isSuccess&&(this.dataSource.data=e.value)})}onSearch(e){console.log(e)}onViewDetails(e){this.selectedUnitOfMeasure=e,this.sidenav?this.sidenav.open():console.error("El sidenav no est\xE1 definido.")}onOpenModal(){this._matDialog.open(_e,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{title:"Agregar Unidad de Medida",payload:{id:0,name:"",abbreviation:"",description:"",products:""}}}).afterClosed().subscribe(e=>{e&&this.getAllUnitsOfMeasure()})}onEdit(e){this._matDialog.open(_e,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{title:"Editar Unidad de Medida",payload:Ve({},e)}}).afterClosed().subscribe(t=>{t&&this.getAllUnitsOfMeasure()})}onDelete(e){this.sSweetalert.showConfirmation(`\xBFQuieres eliminar la unidad de medida: ${e.name}?`,()=>{this.sBaseApi.removeItem("unitOfMeasure",e.id).subscribe(t=>{t.isSuccess?(this.sSweetalert.showSuccess("Unidad de medida eliminada"),this.getAllUnitsOfMeasure()):this.sSweetalert.showError("Error al eliminar la unidad de medida")})})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-unitofmeasurements"]],viewQuery:function(t,a){if(t&1&&O(ti,5),t&2){let d;B(d=V())&&(a.sidenav=d.first)}},standalone:!0,features:[h],decls:30,vars:4,consts:[["sidenav",""],[1,"flex","flex-wrap","justify-end","gap-2","mb-4"],["type","button",1,"btn-add",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["class","itemHeader","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","abbreviation"],["matColumnDef","description"],["matColumnDef","products"],["matColumnDef","acciones"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","over","position","end",1,"custom-sidenav",3,"opened"],["mat-header-cell","",1,"itemHeader"],["mat-cell",""],["mat-cell","",1,"actions-cell"],[1,"actions-container"],["mat-icon-button","",1,"btnEliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){if(t&1){let d=k();o(0,"div",1)(1,"button",2),f("click",function(){return D(d),w(a.onOpenModal())}),o(2,"mat-icon"),r(3,"add"),n()()(),o(4,"div",3)(5,"div",4)(6,"table",5),v(7,6),c(8,ii,2,0,"th",7)(9,oi,2,1,"td",8),g(),v(10,9),c(11,ni,2,0,"th",7)(12,ai,2,1,"td",8),g(),v(13,10),c(14,ri,2,0,"th",7)(15,li,2,1,"td",8),g(),r(16,"s "),v(17,11),c(18,mi,2,0,"th",7)(19,pi,2,1,"td",8),g(),v(20,12),c(21,si,2,0,"th",7)(22,di,2,1,"td",8),g(),v(23,13),c(24,ci,2,0,"th",7)(25,ui,5,0,"td",14),g(),c(26,fi,1,0,"tr",15)(27,vi,1,0,"tr",16),n()()(),s(28,"mat-sidenav",17,0)}t&2&&(l(6),m("dataSource",a.dataSource),l(20),m("matHeaderRowDef",a.displayedColumns),l(),m("matRowDefColumns",a.displayedColumns),l(),m("opened",!1))},dependencies:[E,re,K,Y,ie,Z,X,oe,ee,te,ne,ae,I,De]})};var Va=[{path:"producto",component:Pe,canActivate:[()=>p(ve).isTokenExpired()?(p(fe).navigate(["/iniciarSesion"]),!1):!0]},{path:"proveedores",component:Ee,canActivate:[()=>p(ve).isTokenExpired()?(p(fe).navigate(["/iniciarSesion"]),!1):!0]},{path:"categorias",component:Te,canActivate:[()=>p(ve).isTokenExpired()?(p(fe).navigate(["/iniciarSesion"]),!1):!0]},{path:"unidades",component:Fe,canActivate:[()=>p(ve).isTokenExpired()?(p(fe).navigate(["/iniciarSesion"]),!1):!0]},{path:"",redirectTo:"producto",pathMatch:"full"}];export{Va as CATALOGO_ROUTES};
