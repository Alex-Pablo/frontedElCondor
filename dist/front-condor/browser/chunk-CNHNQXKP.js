import{a as J}from"./chunk-FWAYOKEG.js";import{b as Q}from"./chunk-LCRFK72W.js";import{a as le}from"./chunk-ZWHC7VKH.js";import{a as A}from"./chunk-ZDGXBWHY.js";import{a as $,b as Oe,d as Te,g as Pe,k as we,w as Ue}from"./chunk-AVVPDZJM.js";import{a as fe}from"./chunk-QMQTSFHS.js";import"./chunk-FK6H3RFT.js";import{a as j,b as H,c as k,d as B,e as L,f as N,g as W,h as V,i as z,j as G,k as Y}from"./chunk-HFPD7HYF.js";import"./chunk-KQQJ2DFX.js";import{a as F}from"./chunk-SQ767D7R.js";import{a as Re,c as h,k as ae}from"./chunk-MTNE5NEP.js";import{$ as M,Ab as u,Bb as s,Cb as c,Eb as pe,Hb as b,Jb as D,Lc as U,Nc as ie,Oc as re,Qa as P,Ua as l,Ub as r,Va as g,Vb as p,W as O,Wb as C,Yb as se,Zb as ce,_b as de,aa as R,ac as w,ea as T,ec as v,fc as Me,gc as S,hc as oe,ma as te,na as ne,nb as m,pb as _,yb as i,zb as n}from"./chunk-X4DW4WN7.js";import{e as me}from"./chunk-EQDQRRRY.js";var $e=me(fe());var ue=class e{constructor(t,o){this.http=t;this.localStorageS=o}getUserReports(){return this.http.get(`${$.baseUrlApi}/UserReports`)}static \u0275fac=function(o){return new(o||e)(M(h),M(Oe))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})};function Le(e,t){e&1&&(i(0,"th",28),r(1,"ID"),n())}function Ne(e,t){if(e&1&&(i(0,"td",29),r(1),n()),e&2){let o=t.$implicit;l(),p(o.id)}}function We(e,t){e&1&&(i(0,"th",28),r(1,"Email"),n())}function Ve(e,t){if(e&1&&(i(0,"td",29),r(1),n()),e&2){let o=t.$implicit;l(),p(o.email)}}function ze(e,t){e&1&&(i(0,"th",28),r(1,"Nombre"),n())}function Ge(e,t){if(e&1&&(i(0,"td",29),r(1),n()),e&2){let o=t.$implicit;l(),p(o.firstname)}}function Ye(e,t){e&1&&(i(0,"th",28),r(1,"Apellido"),n())}function Qe(e,t){if(e&1&&(i(0,"td",29),r(1),n()),e&2){let o=t.$implicit;l(),p(o.lastname)}}function Je(e,t){e&1&&(i(0,"th",28),r(1,"Role"),n())}function Xe(e,t){if(e&1&&(i(0,"td",29),r(1),n()),e&2){let o=t.$implicit;l(),p(o.role)}}function qe(e,t){e&1&&(i(0,"th",28),r(1,"Inicio sesion"),n())}function Ke(e,t){if(e&1&&(i(0,"td",29),r(1),v(2,"date"),n()),e&2){let o=t.$implicit;l(),p(S(2,1,o.last_login_at,"short"))}}function Ze(e,t){e&1&&(i(0,"th",28),r(1,"Cierre de sesion"),n())}function et(e,t){if(e&1&&(i(0,"td",29),r(1),v(2,"date"),n()),e&2){let o=t.$implicit;l(),p(S(2,1,o.last_logout_at,"short"))}}function tt(e,t){e&1&&(i(0,"th",28),r(1,"Ultima actualizacion"),n())}function nt(e,t){if(e&1&&(i(0,"td",29),r(1),v(2,"date"),n()),e&2){let o=t.$implicit;l(),p(S(2,1,o.updated_at,"short"))}}function it(e,t){e&1&&(i(0,"th",28),r(1,"Fecha de creacion"),n())}function rt(e,t){if(e&1&&(i(0,"td",29),r(1),v(2,"date"),n()),e&2){let o=t.$implicit;l(),p(S(2,1,o.created_at,"short"))}}function ot(e,t){e&1&&(i(0,"th",28),r(1,"Estado"),n())}function at(e,t){if(e&1&&(i(0,"td",29),r(1),n()),e&2){let o=t.$implicit,a=D();l(),p(a.getStatusDescription(o.stateUser))}}function lt(e,t){e&1&&u(0,"tr",30)}function mt(e,t){if(e&1){let o=pe();i(0,"tr",31),b("mouseover",function(){let d=te(o).$implicit,f=D();return ne(f.hoveredRow=d)})("mouseleave",function(){te(o);let d=D();return ne(d.hoveredRow=null)}),n()}}var ge=class e{constructor(t,o,a,d,f){this.reportsService=t;this.sTitle=o;this.authService=a;this.http=d;this.enterpriseService=f;this.sTitle.setTitle("Reportes-Usuarios")}displayedColumns=["id","email","firstname","lastname","stateUser","last_login_at","created_at","last_logout_at","updated_at","role"];reportUsers=[];userInfor;enterpriseInfor;logocondor="/img/logo.png";apiUrl="https://localhost:7059/api/Enterprise/detail/";getEnterpriseById(t){return this.http.get(`${this.apiUrl}${t}`)}isLoadingResults=!0;isRateLimitReached=!1;resultsLength=0;hoveredRow=null;ngOnInit(){this.authService.getProfile().subscribe(t=>{t.isSuccess&&(this.userInfor=t.value)}),this.reportsService.getUserReports().subscribe(t=>{t.isSuccess&&(this.reportUsers=t.value??[])}),this.enterpriseService.getEnterpriseById(1).subscribe(t=>{t.isSuccess?this.enterpriseInfor=t.value:console.error("Error al obtener datos de la empresa:",t.error)})}getStatusDescription(t){switch(t){case"A":return"Activo";case"I":return"Inactivo";default:return"Desconocido"}}exportToPDF(){let t=document.getElementById("reportContent"),o=new Q("p","mm","a4"),a=new Date,d=a.toLocaleDateString(),f=a.toLocaleTimeString(),y=this.enterpriseInfor?.logo,I=document.getElementById("reportDate"),E=document.getElementById("reportMonth"),x=document.getElementById("reportUser");I&&(I.textContent=` ${d}, ${f}`),E&&(E.textContent=` ${a.toLocaleString("default",{month:"long"})} ${a.getFullYear()}`),x&&(x.textContent=` ${this.userInfor?.firstname} ${this.userInfor?.lastname}`),(0,$e.default)(t).then(Z=>{let X=Z.height*208/Z.width,ke=Z.toDataURL("image/png");o.addImage(ke,"PNG",0,0,208,X),o.save(`reporte-usuarios-${d}-${f}.pdf`)})}static \u0275fac=function(o){return new(o||e)(g(ue),g(F),g(A),g(h),g(J))};static \u0275cmp=T({type:e,selectors:[["app-user"]],standalone:!0,features:[w],decls:76,vars:8,consts:[[1,"container-btn"],[3,"click"],["id","reportContent"],[1,"head"],[1,"info-report"],["alt","Logo",3,"src"],[1,"header"],["id","reportMonth"],["id","reportDate"],["id","reportUser"],[1,"table-container"],[1,"example-container"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","firstname"],["matColumnDef","lastname"],["matColumnDef","role"],["matColumnDef","last_login_at"],["matColumnDef","last_logout_at"],["matColumnDef","updated_at"],["matColumnDef","created_at"],["matColumnDef","stateUser"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"mouseover","mouseleave",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"mouseover","mouseleave"]],template:function(o,a){o&1&&(i(0,"div",0)(1,"button",1),b("click",function(){return a.exportToPDF()}),r(2,"Exportar a PDF"),n()(),i(3,"div",2)(4,"div",3)(5,"section",4),u(6,"img",5),i(7,"p")(8,"strong"),r(9),n()()(),i(10,"section",4)(11,"h1"),r(12,"REPORTE DE USUARIOS"),n()()(),i(13,"div",6)(14,"div")(15,"p")(16,"strong"),r(17,"Telefono:"),n(),r(18),n(),i(19,"p")(20,"strong"),r(21,"E-mail:"),n(),r(22),n(),i(23,"p")(24,"strong"),r(25,"Direccion:"),n(),r(26),n()(),i(27,"div")(28,"p")(29,"strong"),r(30,"Mes:"),n(),u(31,"span",7),n(),i(32,"p")(33,"strong"),r(34,"Fecha y hora de emisi\xF3n:"),n(),u(35,"span",8),n(),i(36,"p")(37,"strong"),r(38,"Elaborado por:"),n(),u(39,"span",9),n()()(),i(40,"div",10)(41,"div",11)(42,"div",12)(43,"table",13),s(44,14),m(45,Le,2,0,"th",15)(46,Ne,2,1,"td",16),c(),s(47,17),m(48,We,2,0,"th",15)(49,Ve,2,1,"td",16),c(),s(50,18),m(51,ze,2,0,"th",15)(52,Ge,2,1,"td",16),c(),s(53,19),m(54,Ye,2,0,"th",15)(55,Qe,2,1,"td",16),c(),s(56,20),m(57,Je,2,0,"th",15)(58,Xe,2,1,"td",16),c(),s(59,21),m(60,qe,2,0,"th",15)(61,Ke,3,4,"td",16),c(),s(62,22),m(63,Ze,2,0,"th",15)(64,et,3,4,"td",16),c(),s(65,23),m(66,tt,2,0,"th",15)(67,nt,3,4,"td",16),c(),s(68,24),m(69,it,2,0,"th",15)(70,rt,3,4,"td",16),c(),s(71,25),m(72,ot,2,0,"th",15)(73,at,2,1,"td",16),c(),m(74,lt,1,0,"tr",26)(75,mt,1,0,"tr",27),n()()()()()),o&2&&(l(6),_("src",a.logocondor,P),l(3),p(a.enterpriseInfor==null?null:a.enterpriseInfor.name),l(9),C(" ",a.enterpriseInfor==null?null:a.enterpriseInfor.phoneNumber,""),l(4),C(" ",a.enterpriseInfor==null?null:a.enterpriseInfor.email,""),l(4),C(" ",a.enterpriseInfor==null?null:a.enterpriseInfor.address,""),l(17),_("dataSource",a.reportUsers),l(31),_("matHeaderRowDef",a.displayedColumns),l(),_("matRowDefColumns",a.displayedColumns))},dependencies:[U,Y,j,k,W,B,H,V,L,N,z,G],styles:[".container-btn[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end;margin-bottom:20px}.container-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--contrast-blue-color);color:var(--bg-color);padding:5px 10px}.head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:var(--bg-color);padding-left:50px;padding-right:50vh;padding-top:15px}.head[_ngcontent-%COMP%]   .info-report[_ngcontent-%COMP%]{font-family:PoppinsBold;display:flex;text-align:center;align-items:center}.head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--contrast-blue-color);margin:0;display:flex;text-align:center}.head[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:poppinsextrabold;flex-grow:1;text-align:center;margin:0;font-size:40px;color:var(--primary-color)}div#reportContent[_ngcontent-%COMP%]   div.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:var(--bg-color);padding:10px 40px}img[_ngcontent-%COMP%]{height:50px}.example-container[_ngcontent-%COMP%]{position:relative}.example-table-container[_ngcontent-%COMP%]{position:relative;overflow:auto;min-width:700px}table[_ngcontent-%COMP%]{width:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:#00000026;z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{max-width:360px;text-align:center;background:red}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{width:64px}.mat-column-created[_ngcontent-%COMP%]{width:124px}"]})};var Fe=me(fe());var _e=class e{constructor(t){this.http=t}apiUrl=$.baseUrlApi;getInventoryReport(){return this.http.get(`${this.apiUrl}/Product/report`)}static \u0275fac=function(o){return new(o||e)(M(h))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})};function st(e,t){e&1&&(i(0,"th",29),r(1,"ID"),n())}function ct(e,t){if(e&1&&(i(0,"td",30),r(1),n()),e&2){let o=t.$implicit;l(),p(o.id)}}function dt(e,t){e&1&&(i(0,"th",29),r(1,"Nombre"),n())}function ft(e,t){if(e&1&&(i(0,"td",30),r(1),n()),e&2){let o=t.$implicit;l(),p(o.name)}}function ut(e,t){e&1&&(i(0,"th",29),r(1,"C\xF3digo"),n())}function gt(e,t){if(e&1&&(i(0,"td",30),r(1),n()),e&2){let o=t.$implicit;l(),p(o.code)}}function _t(e,t){e&1&&(i(0,"th",29),r(1,"Descripci\xF3n"),n())}function Ct(e,t){if(e&1&&(i(0,"td",30),r(1),n()),e&2){let o=t.$implicit;l(),p(o.description)}}function vt(e,t){e&1&&(i(0,"th",29),r(1,"Precio de Compra"),n())}function ht(e,t){if(e&1&&(i(0,"td",30),r(1),v(2,"currency"),n()),e&2){let o=t.$implicit;l(),p(oe(2,1,o.purchasePrice,"GTQ","symbol"))}}function xt(e,t){e&1&&(i(0,"th",29),r(1,"Precio de Venta"),n())}function St(e,t){if(e&1&&(i(0,"td",30),r(1),v(2,"currency"),n()),e&2){let o=t.$implicit;l(),p(oe(2,1,o.salePrice,"GTQ","symbol"))}}function It(e,t){e&1&&(i(0,"th",29),r(1,"Unidad de Medida"),n())}function Et(e,t){if(e&1&&(i(0,"td",30),r(1),n()),e&2){let o=t.$implicit;l(),p(o.unidOfMeasure)}}function bt(e,t){e&1&&(i(0,"th",29),r(1,"Stock"),n())}function Dt(e,t){if(e&1&&(i(0,"td",30),r(1),n()),e&2){let o=t.$implicit;l(),p(o.stock)}}function yt(e,t){e&1&&(i(0,"th",29),r(1,"Estado"),n())}function Mt(e,t){if(e&1&&(i(0,"td",30),r(1),n()),e&2){let o=t.$implicit,a=D();l(),p(a.getStatusDescription(o.status))}}function Rt(e,t){e&1&&(i(0,"th",29),r(1,"Fecha de Creaci\xF3n"),n())}function Ot(e,t){if(e&1&&(i(0,"td",30),r(1),v(2,"date"),n()),e&2){let o=t.$implicit;l(),p(S(2,1,o.created_at,"short"))}}function Tt(e,t){e&1&&(i(0,"th",29),r(1,"\xDAltima Actualizaci\xF3n"),n())}function Pt(e,t){if(e&1&&(i(0,"td",30),r(1),v(2,"date"),n()),e&2){let o=t.$implicit;l(),p(S(2,1,o.updated_at,"short"))}}function wt(e,t){e&1&&u(0,"tr",31)}function Ut(e,t){if(e&1){let o=pe();i(0,"tr",32),b("mouseover",function(){let d=te(o).$implicit,f=D();return ne(f.hoveredRow=d)})("mouseleave",function(){te(o);let d=D();return ne(d.hoveredRow=null)}),n()}}var Ce=class e{constructor(t,o,a,d,f){this.inventoryService=t;this.titleService=o;this.authService=a;this.http=d;this.enterpriseService=f;this.titleService.setTitle("Reportes - Inventario")}displayedColumns=["id","name","code","description","purchasePrice","salePrice","unidOfMeasure","stock","status","created_at","updated_at"];reportInventory=[];userInfo;enterpriseInfo;hoveredRow=null;logocondor="/img/logo.png";apiUrl="https://localhost:7059/api/Enterprise/detail/";ngOnInit(){this.authService.getProfile().subscribe(t=>{t.isSuccess&&(this.userInfo=t.value)}),this.inventoryService.getInventoryReport().subscribe(t=>{this.reportInventory=t},t=>{console.error("Error en la llamada a la API:",t)}),this.enterpriseService.getEnterpriseById(1).subscribe(t=>{t.isSuccess?this.enterpriseInfo=t.value:console.error("Error al obtener datos de la empresa:",t.error)})}getStatusDescription(t){switch(t){case"S":return"Disponible";case"P":return"Registrado";default:return"Desconocido"}}exportToPDF(){let t=document.getElementById("reportContent"),o=new Q("p","mm","a4"),a=new Date,d=a.toLocaleDateString(),f=a.toLocaleTimeString(),y=document.getElementById("reportMonth"),I=document.getElementById("reportDate"),E=document.getElementById("reportUser");y&&(y.textContent=` ${a.toLocaleString("default",{month:"long"})} ${a.getFullYear()}`),I&&(I.textContent=` ${d}, ${f}`),E&&(E.textContent=` ${this.userInfo?.firstname} ${this.userInfo?.lastname}`),(0,Fe.default)(t).then(x=>{let ee=x.height*208/x.width,X=x.toDataURL("image/png");o.addImage(X,"PNG",0,0,208,ee),o.save(`reporte-inventario-${d}-${f}.pdf`)})}static \u0275fac=function(o){return new(o||e)(g(_e),g(F),g(A),g(h),g(J))};static \u0275cmp=T({type:e,selectors:[["app-inventory-report"]],standalone:!0,features:[w],decls:79,vars:8,consts:[[1,"container-btn"],[3,"click"],["id","reportContent"],[1,"head"],[1,"info-report"],["alt","Logo",3,"src"],[1,"header"],["id","reportMonth"],["id","reportDate"],["id","reportUser"],[1,"table-container"],[1,"example-container"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","code"],["matColumnDef","description"],["matColumnDef","purchasePrice"],["matColumnDef","salePrice"],["matColumnDef","unidOfMeasure"],["matColumnDef","stock"],["matColumnDef","status"],["matColumnDef","created_at"],["matColumnDef","updated_at"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"mouseover","mouseleave",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"mouseover","mouseleave"]],template:function(o,a){o&1&&(i(0,"div",0)(1,"button",1),b("click",function(){return a.exportToPDF()}),r(2,"Exportar a PDF"),n()(),i(3,"div",2)(4,"div",3)(5,"section",4),u(6,"img",5),i(7,"p")(8,"strong"),r(9),n()()(),i(10,"section",4)(11,"h1"),r(12,"REPORTE DE INVENTARIO"),n()()(),i(13,"div",6)(14,"div")(15,"p")(16,"strong"),r(17,"Tel\xE9fono:"),n(),r(18),n(),i(19,"p")(20,"strong"),r(21,"E-mail:"),n(),r(22),n(),i(23,"p")(24,"strong"),r(25,"Direcci\xF3n:"),n(),r(26),n()(),i(27,"div")(28,"p")(29,"strong"),r(30,"Mes:"),n(),u(31,"span",7),n(),i(32,"p")(33,"strong"),r(34,"Fecha y hora de emisi\xF3n:"),n(),u(35,"span",8),n(),i(36,"p")(37,"strong"),r(38,"Elaborado por:"),n(),u(39,"span",9),n()()(),i(40,"div",10)(41,"div",11)(42,"div",12)(43,"table",13),s(44,14),m(45,st,2,0,"th",15)(46,ct,2,1,"td",16),c(),s(47,17),m(48,dt,2,0,"th",15)(49,ft,2,1,"td",16),c(),s(50,18),m(51,ut,2,0,"th",15)(52,gt,2,1,"td",16),c(),s(53,19),m(54,_t,2,0,"th",15)(55,Ct,2,1,"td",16),c(),s(56,20),m(57,vt,2,0,"th",15)(58,ht,3,5,"td",16),c(),s(59,21),m(60,xt,2,0,"th",15)(61,St,3,5,"td",16),c(),s(62,22),m(63,It,2,0,"th",15)(64,Et,2,1,"td",16),c(),s(65,23),m(66,bt,2,0,"th",15)(67,Dt,2,1,"td",16),c(),s(68,24),m(69,yt,2,0,"th",15)(70,Mt,2,1,"td",16),c(),s(71,25),m(72,Rt,2,0,"th",15)(73,Ot,3,4,"td",16),c(),s(74,26),m(75,Tt,2,0,"th",15)(76,Pt,3,4,"td",16),c(),m(77,wt,1,0,"tr",27)(78,Ut,1,0,"tr",28),n()()()()()),o&2&&(l(6),_("src",a.logocondor,P),l(3),p(a.enterpriseInfo==null?null:a.enterpriseInfo.name),l(9),C(" ",a.enterpriseInfo==null?null:a.enterpriseInfo.phoneNumber,""),l(4),C(" ",a.enterpriseInfo==null?null:a.enterpriseInfo.email,""),l(4),C(" ",a.enterpriseInfo==null?null:a.enterpriseInfo.address,""),l(17),_("dataSource",a.reportInventory),l(34),_("matHeaderRowDef",a.displayedColumns),l(),_("matRowDefColumns",a.displayedColumns))},dependencies:[re,ie,U,Y,j,k,W,B,H,V,L,N,z,G],styles:[".container-btn[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end;margin-bottom:20px}.container-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--contrast-blue-color);color:var(--bg-color);padding:5px 10px}.head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:var(--bg-color);padding-left:50px;padding-right:50vh;padding-top:15px}.head[_ngcontent-%COMP%]   .info-report[_ngcontent-%COMP%]{font-family:PoppinsBold;display:flex;text-align:center;align-items:center}.head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--contrast-blue-color);margin:0;display:flex;text-align:center}.head[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:poppinsextrabold;flex-grow:1;text-align:center;margin:0;font-size:40px;color:var(--primary-color)}div#reportContent[_ngcontent-%COMP%]   div.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:var(--bg-color);padding:10px 40px}img[_ngcontent-%COMP%]{height:50px}.example-container[_ngcontent-%COMP%]{position:relative}.example-table-container[_ngcontent-%COMP%]{position:relative;overflow:auto;min-width:700px}table[_ngcontent-%COMP%]{width:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:#00000026;z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{max-width:360px;text-align:center;background:red}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{width:64px}.mat-column-created[_ngcontent-%COMP%]{width:124px}"]})};var je=me(fe());var ve=class e{constructor(t){this.http=t}apiUrl=$.baseUrlApi;getOrderReport(){return this.http.get(`${this.apiUrl}/Order/getAll`)}static \u0275fac=function(o){return new(o||e)(M(h))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})};function At(e,t){e&1&&(i(0,"th",25),r(1,"ID"),n())}function Ft(e,t){if(e&1&&(i(0,"td",26),r(1),n()),e&2){let o=t.$implicit;l(),p(o.id)}}function jt(e,t){e&1&&(i(0,"th",25),r(1,"Proveedor"),n())}function Ht(e,t){if(e&1&&(i(0,"td",26),r(1),n()),e&2){let o=t.$implicit;l(),p(o.supplier)}}function kt(e,t){e&1&&(i(0,"th",25),r(1,"Contacto Proveedor"),n())}function Bt(e,t){if(e&1&&(i(0,"td",26),r(1),n()),e&2){let o=t.$implicit;l(),p(o.supplierContact)}}function Lt(e,t){e&1&&(i(0,"th",25),r(1,"Total Productos"),n())}function Nt(e,t){if(e&1&&(i(0,"td",26),r(1),n()),e&2){let o=t.$implicit;l(),p(o.productsTotal)}}function Wt(e,t){e&1&&(i(0,"th",25),r(1,"Total Precio"),n())}function Vt(e,t){if(e&1&&(i(0,"td",26),r(1),v(2,"currency"),n()),e&2){let o=t.$implicit;l(),p(oe(2,1,o.priceTotal,"GTQ","symbol"))}}function zt(e,t){e&1&&(i(0,"th",25),r(1,"Estado"),n())}function Gt(e,t){if(e&1&&(i(0,"td",26),r(1),n()),e&2){let o=t.$implicit,a=D();l(),p(a.getStatusDescription(o.status))}}function Yt(e,t){e&1&&(i(0,"th",25),r(1,"Fecha de Orden"),n())}function Qt(e,t){if(e&1&&(i(0,"td",26),r(1),v(2,"date"),n()),e&2){let o=t.$implicit;l(),p(S(2,1,o.timeOrder,"short"))}}function Jt(e,t){e&1&&u(0,"tr",27)}function Xt(e,t){e&1&&u(0,"tr",28)}var he=class e{constructor(t,o,a,d,f){this.orderReportService=t;this.titleService=o;this.authService=a;this.http=d;this.enterpriseService=f;this.titleService.setTitle("Reportes - \xD3rdenes")}displayedColumns=["id","supplier","supplierContact","productsTotal","priceTotal","status","timeOrder"];orderReport=[];userInfo;enterpriseInfo;logocondor="/img/logo.png";apiUrl="https://localhost:7059/api/Enterprise/detail/";ngOnInit(){this.authService.getProfile().subscribe(t=>{t.isSuccess&&(this.userInfo=t.value)}),this.orderReportService.getOrderReport().subscribe(t=>{t.isSuccess?this.orderReport=t.value||[]:console.error("Error al obtener el reporte:",t.error)},t=>{console.error("Error en la llamada a la API:",t)}),this.enterpriseService.getEnterpriseById(1).subscribe(t=>{t.isSuccess?this.enterpriseInfo=t.value:console.error("Error al obtener datos de la empresa:",t.error)})}getStatusDescription(t){switch(t){case"E":return"En Proceso";case"P":return"Pendiente";case"C":return"Recibido";case"X":return"Cancelado";default:return"Desconocido"}}exportToPDF(){let t=document.getElementById("reportContent"),o=new Q("p","mm","a4"),a=new Date,d=a.toLocaleDateString(),f=a.toLocaleTimeString(),y=document.getElementById("reportMonth"),I=document.getElementById("reportDate"),E=document.getElementById("reportUser");y&&(y.textContent=` ${a.toLocaleString("default",{month:"long"})} ${a.getFullYear()}`),I&&(I.textContent=` ${d}, ${f}`),E&&(E.textContent=` ${this.userInfo?.firstname} ${this.userInfo?.lastname}`),(0,je.default)(t).then(x=>{let ee=x.height*208/x.width,X=x.toDataURL("image/png");o.addImage(X,"PNG",0,0,208,ee),o.save(`reporte-ordenes-${d}-${f}.pdf`)})}static \u0275fac=function(o){return new(o||e)(g(ve),g(F),g(A),g(h),g(J))};static \u0275cmp=T({type:e,selectors:[["app-order-report"]],standalone:!0,features:[w],decls:67,vars:8,consts:[[1,"container-btn"],[3,"click"],["id","reportContent"],[1,"head"],[1,"info-report"],["alt","Logo",3,"src"],[1,"header"],["id","reportMonth"],["id","reportDate"],["id","reportUser"],[1,"table-container"],[1,"example-container"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","timeOrder","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","supplier"],["matColumnDef","supplierContact"],["matColumnDef","productsTotal"],["matColumnDef","priceTotal"],["matColumnDef","status"],["matColumnDef","timeOrder"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(o,a){o&1&&(i(0,"div",0)(1,"button",1),b("click",function(){return a.exportToPDF()}),r(2,"Exportar a PDF"),n()(),i(3,"div",2)(4,"div",3)(5,"section",4),u(6,"img",5),i(7,"p")(8,"strong"),r(9),n()()(),i(10,"section",4)(11,"h1"),r(12,"REPORTE DE \xD3RDENES"),n()()(),i(13,"div",6)(14,"div")(15,"p")(16,"strong"),r(17,"Tel\xE9fono:"),n(),r(18),n(),i(19,"p")(20,"strong"),r(21,"E-mail:"),n(),r(22),n(),i(23,"p")(24,"strong"),r(25,"Direcci\xF3n:"),n(),r(26),n()(),i(27,"div")(28,"p")(29,"strong"),r(30,"Mes:"),n(),u(31,"span",7),n(),i(32,"p")(33,"strong"),r(34,"Fecha y hora de emisi\xF3n:"),n(),u(35,"span",8),n(),i(36,"p")(37,"strong"),r(38,"Elaborado por:"),n(),u(39,"span",9),n()()(),i(40,"div",10)(41,"div",11)(42,"div",12)(43,"table",13),s(44,14),m(45,At,2,0,"th",15)(46,Ft,2,1,"td",16),c(),s(47,17),m(48,jt,2,0,"th",15)(49,Ht,2,1,"td",16),c(),s(50,18),m(51,kt,2,0,"th",15)(52,Bt,2,1,"td",16),c(),s(53,19),m(54,Lt,2,0,"th",15)(55,Nt,2,1,"td",16),c(),s(56,20),m(57,Wt,2,0,"th",15)(58,Vt,3,5,"td",16),c(),s(59,21),m(60,zt,2,0,"th",15)(61,Gt,2,1,"td",16),c(),s(62,22),m(63,Yt,2,0,"th",15)(64,Qt,3,4,"td",16),c(),m(65,Jt,1,0,"tr",23)(66,Xt,1,0,"tr",24),n()()()()()),o&2&&(l(6),_("src",a.logocondor,P),l(3),p(a.enterpriseInfo==null?null:a.enterpriseInfo.name),l(9),C(" ",a.enterpriseInfo==null?null:a.enterpriseInfo.phoneNumber,""),l(4),C(" ",a.enterpriseInfo==null?null:a.enterpriseInfo.email,""),l(4),C(" ",a.enterpriseInfo==null?null:a.enterpriseInfo.address,""),l(17),_("dataSource",a.orderReport),l(22),_("matHeaderRowDef",a.displayedColumns),l(),_("matRowDefColumns",a.displayedColumns))},dependencies:[re,ie,U,Y,j,k,W,B,H,V,L,N,z,G],styles:[".container-btn[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end;margin-bottom:20px}.container-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--contrast-blue-color);color:var(--bg-color);padding:5px 10px}.head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:var(--bg-color);padding-left:50px;padding-right:50vh;padding-top:15px}.head[_ngcontent-%COMP%]   .info-report[_ngcontent-%COMP%]{font-family:PoppinsBold;display:flex;text-align:center;align-items:center}.head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--contrast-blue-color);margin:0;display:flex;text-align:center}.head[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:poppinsextrabold;flex-grow:1;text-align:center;margin:0;font-size:40px;color:var(--primary-color)}div#reportContent[_ngcontent-%COMP%]   div.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:var(--bg-color);padding:10px 40px}img[_ngcontent-%COMP%]{height:50px}.example-container[_ngcontent-%COMP%]{position:relative}.example-table-container[_ngcontent-%COMP%]{position:relative;overflow:auto;min-width:700px}table[_ngcontent-%COMP%]{width:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:#00000026;z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{max-width:360px;text-align:center;background:red}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{width:64px}.mat-column-created[_ngcontent-%COMP%]{width:124px}"]})};var He=me(fe());var xe=class e{constructor(t){this.http=t}baseUrl=$.baseUrlApi;registerSale(t){return this.http.post(`${this.baseUrl}/Sale/register`,t)}getSaleHistory(t){return this.http.get(`${this.baseUrl}/Sale/inventory/history/GetItems`,{params:t})}getSaleDetail(t){return this.http.get(`${this.baseUrl}/Sale/detail/${t}`)}filterSales(t,o,a){let d=new Re().set("numberDTE",t||"").set("startDate",o||"").set("endDate",a||"");return this.http.get(`${this.baseUrl}/Sale/filter`,{params:d})}static \u0275fac=function(o){return new(o||e)(M(h))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})};function Kt(e,t){e&1&&(i(0,"th",30),r(1,"ID"),n())}function Zt(e,t){if(e&1&&(i(0,"td",31),r(1),n()),e&2){let o=t.$implicit;l(),p(o.id)}}function en(e,t){e&1&&(i(0,"th",30),r(1,"Total"),n())}function tn(e,t){if(e&1&&(i(0,"td",31),r(1),v(2,"currency"),n()),e&2){let o=t.$implicit;l(),p(Me(2,1,o.total))}}function nn(e,t){e&1&&(i(0,"th",30),r(1,"ID Usuario"),n())}function rn(e,t){if(e&1&&(i(0,"td",31),r(1),n()),e&2){let o=t.$implicit;l(),p(o.iD_User)}}function on(e,t){e&1&&(i(0,"th",30),r(1,"Fecha de Venta"),n())}function an(e,t){if(e&1&&(i(0,"td",31),r(1),v(2,"date"),n()),e&2){let o=t.$implicit;l(),p(S(2,1,o.saleDate,"short"))}}function ln(e,t){e&1&&(i(0,"th",30),r(1,"Total Productos"),n())}function mn(e,t){if(e&1&&(i(0,"td",31),r(1),n()),e&2){let o=t.$implicit;l(),p(o.productsTotal)}}function pn(e,t){e&1&&u(0,"tr",32)}function sn(e,t){e&1&&u(0,"tr",33)}var Se=class e{constructor(t,o,a,d,f){this.saleService=t;this.titleService=o;this.authService=a;this.http=d;this.enterpriseService=f;this.titleService.setTitle("Reportes-Ventas")}displayedColumns=["id","total","iD_User","saleDate","productsTotal"];salesReport=[];userInfor;enterpriseInfor;logocondor="/img/logo.png";apiUrl="https://localhost:7059/api/Enterprise/detail/";numberDTE="1";startDate="";endDate="";getEnterpriseById(t){return this.http.get(`${this.apiUrl}${t}`)}ngOnInit(){this.authService.getProfile().subscribe(t=>{t.isSuccess&&(this.userInfor=t.value)}),this.enterpriseService.getEnterpriseById(1).subscribe(t=>{t.isSuccess?this.enterpriseInfor=t.value:console.error("Error al obtener datos de la empresa:",t.error)})}fetchSalesReport(){this.saleService.filterSales(this.numberDTE,this.startDate,this.endDate).subscribe(t=>{t.isSuccess?this.salesReport=t.value??[]:console.error("Error al obtener el reporte de ventas:",t.error)})}exportToPDF(){let t=document.getElementById("reportContent"),o=new Q("p","mm","a4"),a=new Date,d=a.toLocaleDateString(),f=a.toLocaleTimeString(),y=document.getElementById("reportDate"),I=document.getElementById("reportMonth"),E=document.getElementById("reportUser");y&&(y.textContent=` ${d}, ${f}`),I&&(I.textContent=` ${a.toLocaleString("default",{month:"long"})} ${a.getFullYear()}`),E&&(E.textContent=` ${this.userInfor?.firstname} ${this.userInfor?.lastname}`),(0,He.default)(t).then(x=>{let ee=x.height*208/x.width,X=x.toDataURL("image/png");o.addImage(X,"PNG",0,0,208,ee),o.save(`reporte-ventas-${d}-${f}.pdf`)})}static \u0275fac=function(o){return new(o||e)(g(xe),g(F),g(A),g(h),g(J))};static \u0275cmp=T({type:e,selectors:[["app-sales"]],standalone:!0,features:[w],decls:73,vars:11,consts:[[1,"container-btn"],[3,"click"],[1,"search-form"],["for","numberDTE"],["id","numberDTE","type","text",3,"ngModelChange","ngModel"],["for","startDate"],["id","startDate","type","date",3,"ngModelChange","ngModel"],["for","endDate"],["id","endDate","type","date",3,"ngModelChange","ngModel"],["id","reportContent"],[1,"head"],[1,"info-report"],["alt","Logo",3,"src"],[1,"header"],["id","reportMonth"],["id","reportDate"],["id","reportUser"],[1,"table-container"],[1,"example-container"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","saleDate","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","total"],["matColumnDef","iD_User"],["matColumnDef","saleDate"],["matColumnDef","productsTotal"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(o,a){o&1&&(i(0,"div",0)(1,"button",1),b("click",function(){return a.exportToPDF()}),r(2,"Exportar a PDF"),n()(),i(3,"div",2)(4,"label",3),r(5,"N\xFAmero DTE:"),n(),i(6,"input",4),de("ngModelChange",function(f){return ce(a.numberDTE,f)||(a.numberDTE=f),f}),n(),i(7,"label",5),r(8,"Fecha de Inicio:"),n(),i(9,"input",6),de("ngModelChange",function(f){return ce(a.startDate,f)||(a.startDate=f),f}),n(),i(10,"label",7),r(11,"Fecha de Fin:"),n(),i(12,"input",8),de("ngModelChange",function(f){return ce(a.endDate,f)||(a.endDate=f),f}),n(),i(13,"button",1),b("click",function(){return a.fetchSalesReport()}),r(14,"Buscar Reporte"),n()(),i(15,"div",9)(16,"div",10)(17,"section",11),u(18,"img",12),i(19,"p")(20,"strong"),r(21),n()()(),i(22,"section",11)(23,"h1"),r(24,"REPORTE DE VENTAS"),n()()(),i(25,"div",13)(26,"div")(27,"p")(28,"strong"),r(29,"Tel\xE9fono:"),n(),r(30),n(),i(31,"p")(32,"strong"),r(33,"E-mail:"),n(),r(34),n(),i(35,"p")(36,"strong"),r(37,"Direcci\xF3n:"),n(),r(38),n()(),i(39,"div")(40,"p")(41,"strong"),r(42,"Mes:"),n(),u(43,"span",14),n(),i(44,"p")(45,"strong"),r(46,"Fecha y hora de emisi\xF3n:"),n(),u(47,"span",15),n(),i(48,"p")(49,"strong"),r(50,"Elaborado por:"),n(),u(51,"span",16),n()()(),i(52,"div",17)(53,"div",18)(54,"div",19)(55,"table",20),s(56,21),m(57,Kt,2,0,"th",22)(58,Zt,2,1,"td",23),c(),s(59,24),m(60,en,2,0,"th",22)(61,tn,3,3,"td",23),c(),s(62,25),m(63,nn,2,0,"th",22)(64,rn,2,1,"td",23),c(),s(65,26),m(66,on,2,0,"th",22)(67,an,3,4,"td",23),c(),s(68,27),m(69,ln,2,0,"th",22)(70,mn,2,1,"td",23),c(),m(71,pn,1,0,"tr",28)(72,sn,1,0,"tr",29),n()()()()()),o&2&&(l(6),se("ngModel",a.numberDTE),l(3),se("ngModel",a.startDate),l(3),se("ngModel",a.endDate),l(6),_("src",a.logocondor,P),l(3),p(a.enterpriseInfor==null?null:a.enterpriseInfor.name),l(9),C(" ",a.enterpriseInfor==null?null:a.enterpriseInfor.phoneNumber,""),l(4),C(" ",a.enterpriseInfor==null?null:a.enterpriseInfor.email,""),l(4),C(" ",a.enterpriseInfor==null?null:a.enterpriseInfor.address,""),l(17),_("dataSource",a.salesReport),l(16),_("matHeaderRowDef",a.displayedColumns),l(),_("matRowDefColumns",a.displayedColumns))},dependencies:[re,ie,U,Ue,Te,Pe,we,Y,j,k,W,B,H,V,L,N,z,G],styles:[".container-btn[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end;margin-bottom:20px}.container-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--contrast-blue-color);color:var(--bg-color);padding:5px 10px}.search-form[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:15px;align-items:center}.search-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}.search-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .search-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:10px;border:1px solid var(--primary-color);border-radius:4px;font-size:16px;cursor:text}.search-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .search-form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{border-color:var(--contrast-blue-color);outline:none;box-shadow:0 0 5px #007bff80}.search-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--txt-orange-color);color:var(--bg-color);border:none;border-radius:4px;padding:10px;cursor:pointer;transition:background-color .3s}.search-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--primary-color)}.head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:var(--bg-color);padding-left:50px;padding-right:50vh;padding-top:15px}.head[_ngcontent-%COMP%]   .info-report[_ngcontent-%COMP%]{font-family:PoppinsBold;display:flex;text-align:center;align-items:center}.head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--contrast-blue-color);margin:0;display:flex;text-align:center}.head[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:poppinsextrabold;flex-grow:1;text-align:center;margin:0;font-size:40px;color:var(--primary-color)}div#reportContent[_ngcontent-%COMP%]   div.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:var(--bg-color);padding:10px 40px}img[_ngcontent-%COMP%]{height:50px}.example-container[_ngcontent-%COMP%]{position:relative}.example-table-container[_ngcontent-%COMP%]{position:relative;overflow:auto;min-width:700px}table[_ngcontent-%COMP%]{width:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:#00000026;z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{max-width:360px;text-align:center;background:red}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{width:64px}.mat-column-created[_ngcontent-%COMP%]{width:124px}"]})};var Vn=[{path:"usuarios",component:ge,canActivate:[()=>R(le).isTokenExpired()?(R(ae).navigate(["/iniciarSesion"]),!1):!0]},{path:"ventas",component:Se,canActivate:[()=>R(le).isTokenExpired()?(R(ae).navigate(["/iniciarSesion"]),!1):!0]},{path:"inventario",component:Ce,canActivate:[()=>R(le).isTokenExpired()?(R(ae).navigate(["/iniciarSesion"]),!1):!0]},{path:"compras",component:he,canActivate:[()=>R(le).isTokenExpired()?(R(ae).navigate(["/iniciarSesion"]),!1):!0]},{path:"",redirectTo:"usuarios",pathMatch:"full"}];export{Vn as REPORTS_ROUTES};
