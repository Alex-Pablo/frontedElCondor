import{a as et,b as tt,c as it,d as ue}from"./chunk-WAMSMXNV.js";import{a as le,b as me,c as pe,d as Ze}from"./chunk-5R77JXWN.js";import{a as A,b as T,c as Q,d as W,e as z,f as J,g as U,h as Ye,i as Be,j as ot,k as nt}from"./chunk-QHK7MVTD.js";import{a as D,b as S}from"./chunk-VPRBATIL.js";import{f as ce}from"./chunk-X6WVUIKK.js";import"./chunk-NWSC6Y3H.js";import{b as ye,d as I}from"./chunk-XMJKV3Y7.js";import"./chunk-E4NSLAU5.js";import"./chunk-AESYL7IM.js";import"./chunk-UZQ2FFVI.js";import{a as ge}from"./chunk-WKFV6RTR.js";import{a as ze}from"./chunk-I5BED3QL.js";import{d as Je,e as b,g as De,h as H,j,l as $,n as Ke,o as q,p as Xe,v as L,x as N}from"./chunk-AQA36TAA.js";import{a as x,b as be}from"./chunk-SSM3X36A.js";import{a as K,b as X,c as Y,d as Z,e as ee,f as te,g as ie,h as oe,i as ne,j as ae,k as re,l as we}from"./chunk-3XHLV4H2.js";import{ea as G}from"./chunk-JMO4GQE3.js";import{k as fe}from"./chunk-7UPJZXFQ.js";import{$ as p,$b as h,Ab as g,Bb as v,Db as k,Gb as f,Ib as M,Ic as Qe,Kc as We,Nb as B,Nc as de,Ob as O,Pa as $e,Pb as V,Ta as l,Tb as r,Ua as P,Ub as u,Vb as E,Xb as qe,Yb as ke,Zb as Le,ac as Ge,da as _,dc as Ne,fc as Ue,la as y,ma as w,mb as c,ob as m,ta as je,tb as Se,wa as Re,xb as o,yb as n,zb as d}from"./chunk-2KSHIZ5A.js";import{a as He}from"./chunk-EQDQRRRY.js";var ve=class i{constructor(e){this.data=e;this.isEditMode=!!e.payload,this.loginForm=this._fb.group({name:[e.payload?.name||"",[b.required]],nameContact:[e.payload?.nameContact||"",[b.required]],phoneNumberContact:[e.payload?.phoneNumber||"",[b.required]],phoneNumberSupplier:[e.payload?.phoneNumberSupplier||""],email:[e.payload?.email||""],address:[e.payload?.address||"",[b.required]],website:[e.payload?.website||""],account:[e.payload?.numberAccount||""],nameAccount:[e.payload?.nameAccount||""],nameBanck:[e.payload?.nameBanck||""],comment:[e.payload?.comment||""],status:[e.payload?.status||"A",[b.required]]})}sBaseApi=p(S);sSweetAlert=p(D);_MatDialgoRef=p(A);_fb=p(L);isEditMode;loginForm;roles;ngOnInit(){}onSubmit(){if(this.loginForm.valid){this.sSweetAlert.showLoading();let e={Name:this.loginForm.get("name")?.value,NameContact:this.loginForm.get("nameContact")?.value,PhoneNumber:this.loginForm.get("phoneNumberContact")?.value,PhoneNumberSupplier:this.loginForm.get("phoneNumberSupplier")?.value,Email:this.loginForm.get("email")?.value,Address:this.loginForm.get("address")?.value,Website:this.loginForm.get("website")?.value,NumberAccount:this.loginForm.get("account")?.value,NameAccount:this.loginForm.get("nameAccount")?.value,NameBanck:this.loginForm.get("nameBanck")?.value,Comment:this.loginForm.get("comment")?.value,Status:this.loginForm.get("status")?.value};if(this.isEditMode){let t=this.data.payload.id;t>0&&this.sBaseApi.updateItem("supplier",e,t).subscribe(a=>{a.isSuccess?(this.sSweetAlert.showSuccess("Proveedor modificado"),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(a.error||"Error  al editar  el proveedor")})}else this.sBaseApi.addItem("supplier",e).subscribe(t=>{t.isSuccess?(this.sSweetAlert.showSuccess("Proveedor creado"),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(t.error||"Error al crear el proveedor")})}else this.sSweetAlert.showError("Campos requeridos")}getFormControl(e){let t=this.loginForm.get(e);return t instanceof j?t:null}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=_({type:i,selectors:[["app-proveedor-popup"]],standalone:!0,features:[h],decls:39,vars:12,consts:[["mat-dialog-title","",1,""],[1,"mat-typography","w-full"],[3,"formGroup"],[1,"w-full","flex","flex-wrap","md:mb-6"],[1,"w-full","md:w-1/2","px-3","mb-6","md:mb-0","sm:w-full"],["label","Nombre de empresa:*","type","text","placeholder","Ingrese de la empresa",3,"control"],["label","Nombre del proveedor (contacto):*","type","text","placeholder","Ingrese el nombre del proveedor",3,"control"],["label","Numero del proveedor de contacto:*","type","text","placeholder","Ingrese el numero",3,"control"],["label","Numero de la empresa:","type","text","placeholder","Ingrese el numero",3,"control"],["label","Email del proveedor:","type","text","placeholder","Ingrese el email",3,"control"],["label","Dirrecion de la empresa:*","type","text","placeholder","Ingrese la direccion",3,"control"],["label","Pagina web:","type","text","placeholder","Ingrese la pagian web",3,"control"],["formControlName","status"],["value","I"],["value","A"],["label","Cuenta bancaria:*","type","text","placeholder","Ingrese el numero de la cuenta",3,"control"],["label","Nombre de la cuenta:*","type","text","placeholder","Ingrese el nombre",3,"control"],["label","Nombre del banco:*","type","text","placeholder","Ingrese el nombre",3,"control"],["align","end"],[3,"click"]],template:function(t,a){t&1&&(o(0,"h2",0),r(1),n(),o(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"div",4),d(6,"app-input-field",5),n(),o(7,"div",4),d(8,"app-input-field",6),n()(),o(9,"div",3)(10,"div",4),d(11,"app-input-field",7),n(),o(12,"div",4),d(13,"app-input-field",8),n()(),o(14,"div",3)(15,"div",4),d(16,"app-input-field",9),n(),o(17,"div",4),d(18,"app-input-field",10),n()(),o(19,"div",3)(20,"div",4),d(21,"app-input-field",11),n(),o(22,"div",4)(23,"mat-radio-group",12)(24,"mat-radio-button",13),r(25,"Inactivo"),n(),o(26,"mat-radio-button",14),r(27,"Activo"),n()()()(),o(28,"div",3)(29,"div",4),d(30,"app-input-field",15),n(),o(31,"div",4),d(32,"app-input-field",16),n()(),o(33,"div",3)(34,"div",4),d(35,"app-input-field",17),n()()()(),o(36,"mat-dialog-actions",18)(37,"app-btn-close",19),f("click",function(){return a._MatDialgoRef.close(!1)}),n(),o(38,"app-btn-accept",19),f("click",function(){return a.onSubmit()}),n()()),t&2&&(l(),u(a.isEditMode?"Editar Proveedor":"Agregar Proveedor"),l(2),m("formGroup",a.loginForm),l(3),m("control",a.getFormControl("name")),l(2),m("control",a.getFormControl("nameContact")),l(3),m("control",a.getFormControl("phoneNumberContact")),l(2),m("control",a.getFormControl("phoneNumberSupplier")),l(3),m("control",a.getFormControl("email")),l(2),m("control",a.getFormControl("address")),l(3),m("control",a.getFormControl("website")),l(9),m("control",a.getFormControl("account")),l(2),m("control",a.getFormControl("nameAccount")),l(3),m("control",a.getFormControl("nameBanck")))},dependencies:[pe,me,le,ue,tt,it,U,W,J,z,N,$,De,H,q,Xe]})};var Ee=class i{constructor(e){this.data=e}_MatDialgoRef=p(A);sBaseApi=p(S);proveedordetail;ngOnInit(){this.loadProveedoresDetails(this.data.id)}loadProveedoresDetails(e){this.sBaseApi.getDetail("supplier",e).subscribe(t=>{this.proveedordetail=t.value})}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=_({type:i,selectors:[["app-proveedor-detail-popup"]],standalone:!0,features:[h],decls:76,vars:20,consts:[[1,"p-4"],[1,"w-full","flex","flex-row","justify-between","items-center"],[1,"text-15"],[3,"click"],[1,"text-blue-500","hover:text-blue-300"],[1,"flex","flex-col"],[1,"title"],[1,"text-content"],[1,"status"],[1,"w-full","flex","flex-col"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),r(3,"Detalle del proveedor"),n(),o(4,"button",3),f("click",function(){return a._MatDialgoRef.close()}),o(5,"mat-icon",4),r(6,"close"),n()()(),o(7,"div",5)(8,"span",6),r(9,"Proveedor"),n(),o(10,"p",7),r(11),n(),o(12,"span",8),r(13),n()(),o(14,"div",9)(15,"span",6),r(16,"Nombre de la empresa"),n(),o(17,"p",7),r(18),n()(),o(19,"div",9)(20,"span",6),r(21,"Correo electronico"),n(),o(22,"p",7),r(23),n()(),o(24,"div",9)(25,"span",6),r(26,"Nombre de la cuenta"),n(),o(27,"p",7),r(28),n()(),o(29,"div",9)(30,"span",6),r(31,"Nombre del banco"),n(),o(32,"p",7),r(33),n()(),o(34,"div",9)(35,"span",6),r(36,"Numero del proveedor de contacto"),n(),o(37,"p",7),r(38),n()(),o(39,"div",9)(40,"span",6),r(41,"Pagina Web"),n(),o(42,"p",7),r(43),n()(),o(44,"div",9)(45,"span",6),r(46,"Direccion de la empresa"),n(),o(47,"p",7),r(48),n()(),o(49,"div",9)(50,"span",6),r(51,"Numero de la empresa"),n(),o(52,"p",7),r(53),n()(),o(54,"div",9)(55,"span",6),r(56,"Cuenta bancaria"),n(),o(57,"p",7),r(58),n()(),o(59,"div",9)(60,"span",6),r(61,"Comentario"),n(),o(62,"p",7),r(63),n()(),o(64,"div",9)(65,"span",6),r(66,"Proveedor creado en"),n(),o(67,"p",7),r(68),Ne(69,"date"),n()(),o(70,"div",9)(71,"span",6),r(72,"Proveedor creado por"),n(),o(73,"p",7),r(74),Ne(75,"date"),n()()()),t&2&&(l(11),u(a.proveedordetail==null?null:a.proveedordetail.username),l(2),u((a.proveedordetail==null?null:a.proveedordetail.status)=="A"?"Activo":"Inactivo"),l(5),u(a.proveedordetail==null?null:a.proveedordetail.name),l(5),u(a.proveedordetail==null?null:a.proveedordetail.email),l(5),u(a.proveedordetail==null?null:a.proveedordetail.nameAccount),l(5),u(a.proveedordetail==null?null:a.proveedordetail.nameBanck),l(5),u(a.proveedordetail==null?null:a.proveedordetail.phoneNumber),l(5),u(a.proveedordetail==null?null:a.proveedordetail.website),l(5),u(a.proveedordetail==null?null:a.proveedordetail.address),l(5),u(a.proveedordetail==null?null:a.proveedordetail.phoneNumberSupplier),l(5),u(a.proveedordetail==null?null:a.proveedordetail.numberAccount),l(5),u(a.proveedordetail==null?null:a.proveedordetail.description),l(5),u(Ue(69,14,a.proveedordetail==null?null:a.proveedordetail.created_at,"short")),l(6),u(Ue(75,17,a.proveedordetail==null?null:a.proveedordetail.created_by,"short")))},dependencies:[I,ce,x,de,We],styles:[".title[_ngcontent-%COMP%]{font-size:12px;color:#73726d}.text-content[_ngcontent-%COMP%]{font-size:14px;color:#46433c;margin:3px}.status[_ngcontent-%COMP%]{font-size:11px;margin:-8px 3px 3px;color:#73726d}"]})};var at=["sidenav"];function rt(i,e){i&1&&(o(0,"th",16),r(1,"ID"),n())}function lt(i,e){if(i&1&&(o(0,"td",17),r(1),n()),i&2){let t=e.$implicit;l(),u(t.id)}}function mt(i,e){i&1&&(o(0,"th",16),r(1," Nombre de la empresa "),n())}function pt(i,e){if(i&1&&(o(0,"td",17),r(1),n()),i&2){let t=e.$implicit;l(),E(" ",t.name," ")}}function st(i,e){i&1&&(o(0,"th",16),r(1," Nombre persona de contacto "),n())}function dt(i,e){if(i&1&&(o(0,"td",17),r(1),n()),i&2){let t=e.$implicit;l(),E(" ",t.nameContact," ")}}function ct(i,e){i&1&&(o(0,"th",16),r(1," Numero de telefono de contacto "),n())}function ut(i,e){if(i&1&&(o(0,"td",17),r(1),n()),i&2){let t=e.$implicit;l(),E(" ",t.phoneNumber," ")}}function ft(i,e){i&1&&(o(0,"th",16),r(1," Estado "),n())}function gt(i,e){i&1&&r(0," Activo ")}function vt(i,e){i&1&&r(0," Inactivo ")}function Ct(i,e){if(i&1&&(o(0,"td",17),c(1,gt,1,0)(2,vt,1,0),n()),i&2){let t=e.$implicit;l(),Se(t.status=="A"?1:t.status=="I"?2:-1)}}function _t(i,e){i&1&&(o(0,"th",16),r(1,"acciones"),n())}function ht(i,e){if(i&1){let t=k();o(0,"td",18)(1,"div",19)(2,"button",20),f("click",function(){let s=y(t).$implicit,C=M();return w(C.onViewDetails(s.id))}),o(3,"mat-icon"),r(4,"visibility"),n()(),o(5,"button",21),f("click",function(){let s=y(t).$implicit,C=M();return w(C.onEdit(s))}),o(6,"mat-icon"),r(7,"edit"),n()(),o(8,"button",22),f("click",function(){let s=y(t).$implicit,C=M();return w(C.onDelete(s.id))}),o(9,"mat-icon"),r(10,"delete"),n()()()()}}function St(i,e){i&1&&d(0,"tr",23)}function bt(i,e){i&1&&d(0,"tr",24)}var xe=class i{displayedColumns=["id","name","nameContact","phoneNumber","status","acciones"];sTitle=p(G);_matDialog=p(Q);searchMessage="Buscar proveedor";dataSource;sSweetalert=p(D);sBaseApi=p(S);selectedId;sidenav;onSearch(e){}ngOnInit(){this.sTitle.setTitle("proveedores"),this.getAllProveedores()}closeSidenav(){this.sidenav.close()}onOpenModal(){this._matDialog.open(ve,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{}}).afterClosed().subscribe(e=>{e&&this.getAllProveedores()})}onDelete(e){this.sSweetalert.showConfirmation(`Quieres eliminar al proveedor: ${e}`,()=>{this.sBaseApi.removeItem("supplier",e).subscribe(t=>{t.isSuccess?(this.sSweetalert.showSuccess("Proveedor eliminado"),this.getAllProveedores()):this.sSweetalert.showError("No se pudo eliminar el proveedor")})})}onEdit(e){this._matDialog.open(ve,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{payload:e}}).afterClosed().subscribe(t=>{t&&this.getAllProveedores()})}onViewDetails(e){this._matDialog.open(Ee,{data:{id:e},width:"350px",height:"100vh",maxHeight:"100vh",position:{right:"0"},panelClass:"dialog-detail"})}getAllProveedores(){this.sBaseApi.getItems("supplier").subscribe(e=>{e.isSuccess&&(this.dataSource=e.value)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-proveedore"]],viewQuery:function(t,a){if(t&1&&B(at,5),t&2){let s;O(s=V())&&(a.sidenav=s.first)}},standalone:!0,features:[h],decls:27,vars:3,consts:[[1,"flex","flex-wrap","justify-end","gap-2","mb-4"],["type","button",1,"btn-add",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["class","itemHeader","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","nameContact"],["matColumnDef","phoneNumber"],["matColumnDef","status"],["matColumnDef","acciones"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"itemHeader"],["mat-cell",""],["mat-cell","",1,"actions-cell"],[1,"actions-container"],["mat-icon-button","",1,"btnVer",3,"click"],["mat-icon-button","",1,"btnEditar",3,"click"],["mat-icon-button","",1,"btnEliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){t&1&&(o(0,"div",0)(1,"button",1),f("click",function(){return a.onOpenModal()}),o(2,"mat-icon"),r(3,"add"),n()()(),o(4,"div",2)(5,"div",3)(6,"table",4),g(7,5),c(8,rt,2,0,"th",6)(9,lt,2,1,"td",7),v(),g(10,8),c(11,mt,2,0,"th",6)(12,pt,2,1,"td",7),v(),g(13,9),c(14,st,2,0,"th",6)(15,dt,2,1,"td",7),v(),g(16,10),c(17,ct,2,0,"th",6)(18,ut,2,1,"td",7),v(),g(19,11),c(20,ft,2,0,"th",6)(21,Ct,3,1,"td",7),v(),g(22,12),c(23,_t,2,0,"th",6)(24,ht,11,0,"td",13),v(),c(25,St,1,0,"tr",14)(26,bt,1,0,"tr",15),n()()()),t&2&&(l(6),m("dataSource",a.dataSource),l(19),m("matHeaderRowDef",a.displayedColumns),l(),m("matRowDefColumns",a.displayedColumns))},dependencies:[be,x,I,re,K,Y,ie,Z,X,oe,ee,te,ne,ae]})};function Dt(i,e){if(i&1&&(o(0,"div",1)(1,"label",2),r(2),n(),d(3,"textarea",3),n()),i&2){let t=M();l(2),u(t.label()),l(),m("formControl",t.control)("placeholder",t.placeholder())}}var se=class i{label=Re.required();placeholder=Re();control;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-input-text-area"]],inputs:{label:[1,"label"],placeholder:[1,"placeholder"],control:"control"},standalone:!0,features:[h],decls:1,vars:1,consts:[["class","w-full",4,"ngIf"],[1,"w-full"],["for","message",1,"block"],["id"," message","rows","4",1,"block","p-2.5","w-full","text-sm","rounded-lg","border","border-gray-300","focus:outline-none","focus:border-teal-800",3,"formControl","placeholder"]],template:function(t,a){t&1&&c(0,Dt,4,3,"div",0),t&2&&m("ngIf",a.control)},dependencies:[N,Je,De,Ke,Qe]})};var Ce=class i{constructor(e){this.data=e;this.isEditMode=!!e.payload,this.loginForm=this._fb.group({profileImg:[null],name:[e.payload?.name||"",[b.required]],code:[e.payload?.code||""],key:[e.payload?.key||""],description:[e.payload?.description||""],purchasePrice:[e.payload?.purchasePrice||"0"],salePrice:[e.payload?.salePrice||"0"],brand:[e.payload?.brand||""],idCategory:[e.payload?.id_category||"",[b.required]],idSupplier:[e.payload?.id_suplier||"",[b.required]],idUnit:[e.payload?.id_unit||"",[b.required]],stock:[e.payload?.stock||"0"],stockMin:[e.payload?.stockMin||"0"],status:[e.payload?.status||"P",[b.required]]}),this.imgUrl=e.payload?.img}sAuth=p(ze);sBaseApi=p(S);sSweetAlert=p(D);_MatDialgoRef=p(A);_fb=p(L);isEditMode;loginForm;imgUrl;fileToUpload;aCategories;aSuppliers;aUnits;aStatus;ngOnInit(){this.getImgProfile(),this.getCategory(),this.getSuppliers(),this.getunits(),this.getStatus()}onSubmit(){if(this.loginForm.valid){this.sSweetAlert.showLoading();let e=new FormData;if(e.append("Name",this.loginForm.value.name),e.append("Code",this.loginForm.value.code),e.append("Key",this.loginForm.value.key),e.append("Description",this.loginForm.value.description),e.append("PurchasePrice",this.loginForm.value.purchasePrice),e.append("SalePrice",this.loginForm.value.salePrice),e.append("Brand",this.loginForm.value.brand),e.append("Id_category",this.loginForm.value.idCategory),e.append("Id_suplier",this.loginForm.value.idSupplier),e.append("Id_unit",this.loginForm.value.idUnit),e.append("Status",this.loginForm.value.status),e.append("Stock",this.loginForm.value.stock),e.append("StockMin",this.loginForm.value.stockMin),e.append("Img",this.loginForm.value.profileImg),this.isEditMode){let t=this.data.payload.id;t>0&&this.sBaseApi.updateItem("Product",e,t).subscribe(a=>{a.isSuccess?(this.sSweetAlert.closeLoading(),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(a.error||"Error  al editar el producto")})}else this.sBaseApi.addItem("Product",e).subscribe(t=>{t.isSuccess?(this.sSweetAlert.closeLoading(),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(t.error||"Error al crear el producto")})}}getCategory(){this.sBaseApi.getItems("Category").subscribe(e=>{this.aCategories=e.value})}getSuppliers(){this.sBaseApi.getItems("Supplier").subscribe(e=>{this.aSuppliers=e.value})}getunits(){this.sBaseApi.getItems("unitOfMeasure").subscribe(e=>{e.isSuccess&&(this.aUnits=e.value)})}getStatus(){this.aStatus=[{id:"S",name:"Disponible (En inventario y listo para la venta)"},{id:"P",name:"Registrado (sin stock ni pedido)"}]}getFormControl(e){let t=this.loginForm.get(e);return t instanceof j?t:null}onCloseModal(){this._MatDialgoRef.close()}onFileChange(e){let t=e.target.files[0];this.fileToUpload=t,this.loginForm.patchValue({profileImg:t});let a=new FileReader;a.onload=s=>{this.imgUrl=s.target.result},a.readAsDataURL(this.fileToUpload)}getImgProfile(){return this.loginForm.value.profileImg}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=_({type:i,selectors:[["app-producto-popup"]],standalone:!0,features:[h],decls:42,vars:21,consts:[["mat-dialog-title","",1,""],[1,"mat-typography","w-full"],[3,"formGroup"],[1,"flex","flex-wrap","md:mb-6"],[1,"w-full","md:w-1/2","px-3","mb-6","md:mb-0","sm:w-full"],["label","Nombre del producto:*","type","text","placeholder","Ingrese el nonbre del producto",3,"control"],[1,"w-full","md:w-1/4","px-3","mb-6","md:mb-0","sm:w-full"],["label","Codigo:","type","text","placeholder","Codigo de producto",3,"control"],["label","Clave:","type","text","placeholder","Clave del producto",3,"control"],["label","Marca del producto:","type","text","placeholder","Ingrese la marca del producto",3,"control"],["label","Precio de aquisicion:","type","number","placeholder","Ingrese el precio de aquisicion",3,"control"],["label","Precio de venta:","type","number","placeholder","Ingrese el precio de venta",3,"control"],[1,"w-full","px-3","mb-6","md:mb-0","sm:w-full"],["label","Descripcion del prodcuto:*","placeholder","Descripcion",3,"control"],["label","Categoria:*","placeholder","Seleccion una categoria",3,"options","control"],["label","Proveedor:*","placeholder","Selecione un proveedor",3,"options","control"],["label","Unidad de medida:*","placeholder","Seleccion una unidad del producto",3,"options","control"],["label","Estado:*","placeholder","Selecione un estado",3,"options","control"],["label","En stock:","type","number","placeholder","Cantidad en stock",3,"control"],["label","Stock minimo:","type","number","placeholder","Cantidad minimo de stock",3,"control"],["label","Agregar imagen del producto",3,"control","imageUrl"],["align","end"],[3,"click"]],template:function(t,a){t&1&&(o(0,"h2",0),r(1),n(),o(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"div",4),d(6,"app-input-field",5),n(),o(7,"div",6),d(8,"app-input-field",7),n(),o(9,"div",6),d(10,"app-input-field",8),n()(),o(11,"div",3)(12,"div",4),d(13,"app-input-field",9),n(),o(14,"div",6),d(15,"app-input-field",10),n(),o(16,"div",6),d(17,"app-input-field",11),n()(),o(18,"div",3)(19,"div",12),d(20,"app-input-text-area",13),n()(),o(21,"div",3)(22,"div",4),d(23,"app-input-select",14),n(),o(24,"div",4),d(25,"app-input-select",15),n()(),o(26,"div",3)(27,"div",4),d(28,"app-input-select",16),n(),o(29,"div",4),d(30,"app-input-select",17),n()(),o(31,"div",3)(32,"div",4),d(33,"app-input-field",18),n(),o(34,"div",4),d(35,"app-input-field",19),n()(),o(36,"div",3)(37,"div",3),d(38,"app-image-uploader",20),n()()()(),o(39,"mat-dialog-actions",21)(40,"app-btn-close",22),f("click",function(){return a.onCloseModal()}),n(),o(41,"app-btn-accept",22),f("click",function(){return a.onSubmit()}),n()()),t&2&&(l(),u(a.isEditMode?"Editar producto":"Crear un nuevo producto"),l(2),m("formGroup",a.loginForm),l(3),m("control",a.getFormControl("name")),l(2),m("control",a.getFormControl("code")),l(2),m("control",a.getFormControl("key")),l(3),m("control",a.getFormControl("brand")),l(2),m("control",a.getFormControl("purchasePrice")),l(2),m("control",a.getFormControl("salePrice")),l(3),m("control",a.getFormControl("description")),l(3),m("options",a.aCategories)("control",a.getFormControl("idCategory")),l(2),m("options",a.aSuppliers)("control",a.getFormControl("idSupplier")),l(3),m("options",a.aUnits)("control",a.getFormControl("idUnit")),l(2),m("options",a.aStatus)("control",a.getFormControl("status")),l(3),m("control",a.getFormControl("stock")),l(2),m("control",a.getFormControl("stockMin")),l(3),m("control",a.getFormControl("profileImg"))("imageUrl",a.imgUrl))},dependencies:[U,W,J,z,pe,Ze,se,le,me,N,$,H,q,et,ue]})};var Ie=class i{constructor(e){this.data=e}_MatDialgoRef=p(A);ProductDetail;sBaseApi=p(S);ngOnInit(){this.loadProductDetails(this.data.id)}loadProductDetails(e){this.sBaseApi.getDetail("product",e).subscribe(t=>{this.ProductDetail=t.value})}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=_({type:i,selectors:[["app-producto-detail-popup"]],standalone:!0,features:[h],decls:7,vars:0,consts:[[1,"p-4"],[1,"w-full","flex","flex-row","justify-between","items-center"],[1,"text-15"],[3,"click"],[1,"text-blue-500","hover:text-blue-300"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),r(3,"Detalle del producto"),n(),o(4,"button",3),f("click",function(){return a._MatDialgoRef.close()}),o(5,"mat-icon",4),r(6,"close"),n()()()())},dependencies:[I,ce,x,de]})};var yt=["sidenav"],wt=()=>[5,10,20];function Mt(i,e){i&1&&(o(0,"th",22),r(1,"ID"),n())}function Et(i,e){if(i&1&&(o(0,"td",23),r(1),n()),i&2){let t=e.$implicit;l(),u(t.id)}}function xt(i,e){i&1&&(o(0,"th",22),r(1,"Imagen"),n())}function It(i,e){if(i&1&&(o(0,"td",23),d(1,"img",24),n()),i&2){let t=e.$implicit;l(),m("src",t.img,$e)}}function Pt(i,e){i&1&&(o(0,"th",22),r(1,"Nombre"),n())}function At(i,e){if(i&1&&(o(0,"td",23),r(1),n()),i&2){let t=e.$implicit;l(),u(t.name)}}function Tt(i,e){i&1&&(o(0,"th",22),r(1,"Codigo"),n())}function Ft(i,e){if(i&1&&(o(0,"td",23),r(1),n()),i&2){let t=e.$implicit;l(),u(t.code)}}function Rt(i,e){i&1&&(o(0,"th",22),r(1,"Clave"),n())}function kt(i,e){if(i&1&&(o(0,"td",23),r(1),n()),i&2){let t=e.$implicit;l(),u(t.key)}}function Nt(i,e){i&1&&(o(0,"th",22),r(1,"Estado"),n())}function Ut(i,e){i&1&&r(0," Disponible ")}function Bt(i,e){i&1&&r(0," En proceso ")}function Ot(i,e){i&1&&r(0," Registrado ")}function Vt(i,e){if(i&1&&(o(0,"td",23),c(1,Ut,1,0)(2,Bt,1,0)(3,Ot,1,0),n()),i&2){let t=e.$implicit;l(),Se(t.status=="S"?1:t.status=="E"?2:t.status=="P"?3:-1)}}function Ht(i,e){i&1&&(o(0,"th",22),r(1,"Precio de aquision"),n())}function jt(i,e){if(i&1&&(o(0,"td",23),r(1),n()),i&2){let t=e.$implicit;l(),u(t.purchasePrice)}}function $t(i,e){i&1&&(o(0,"th",22),r(1,"Precio de venta"),n())}function qt(i,e){if(i&1&&(o(0,"td",23),r(1),n()),i&2){let t=e.$implicit;l(),u(t.salePrice)}}function Lt(i,e){i&1&&(o(0,"th",22),r(1,"Acciones"),n())}function Gt(i,e){if(i&1){let t=k();o(0,"td",25)(1,"div",26)(2,"button",27),f("click",function(){let s=y(t).$implicit,C=M();return w(C.onViewDetails(s.id))}),o(3,"mat-icon"),r(4,"visibility"),n()(),o(5,"button",28),f("click",function(){let s=y(t).$implicit,C=M();return w(C.onEdit(s))}),o(6,"mat-icon"),r(7,"edit"),n()()()()}}function Qt(i,e){i&1&&d(0,"tr",29)}function Wt(i,e){i&1&&d(0,"tr",30)}var Pe=class i{_BaseApi=p(S);searchInput=null;selectedStartDate;sTitle=p(G);sidenav;_matDialog=p(Q);dataSource=new we;selectedEndDate;searchMessage="Buscar producto";sSweetalert=p(D);aProducts;totalItems=0;dItemDateEnd;dItemDateStart;paginatorSubscription;paginator;constructor(){this.sTitle.setTitle("Catalogo - Productos")}ngAfterViewInit(){this.paginatorSubscription=this.paginator.page.subscribe(()=>this.loadItems()),this.loadItems(),this.paginator.page.subscribe(()=>this.loadItems()),this.loadItems()}filterItems(){this._BaseApi.filter("producto",this.searchInput,this.selectedStartDate,this.selectedEndDate).subscribe(e=>{this.dataSource.data=e.value})}clearFilters(){this.searchInput=null,this.selectedEndDate=null,this.selectedStartDate=null,this.paginator.pageIndex=0,this.loadItems()}loadItems(){let e=this.paginator.pageIndex,t=this.paginator.pageSize;this._BaseApi.getItemsPagination("product",e+1,t).subscribe(a=>{this.dataSource.data=a.items,this.totalItems=a.pagination.TotalItemCount,this.paginator.pageIndex=a.pagination.CurrentPage-1,this.paginator.length=this.totalItems})}handleDateRangeChange(e){this.dItemDateEnd=e.endDate,this.dItemDateStart=e.startDate}ngOnInit(){}onOpenModal(){this._matDialog.open(Ce,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{}}).afterClosed().subscribe(e=>{e&&this.loadItems()})}onDelete(e){}onEdit(e){this._matDialog.open(Ce,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{payload:e}}).afterClosed().subscribe(t=>{t&&this.loadItems()})}onSearch(e){}onViewDetails(e){this._matDialog.open(Ie,{data:{id:e},width:"350px",height:"100vh",maxHeight:"100vh",position:{right:"0"},panelClass:"dialog-detail"})}closeSidenav(){this.sidenav.close()}getProducts(){this._BaseApi.getItems("Product").subscribe(e=>{e.isSuccess&&(this.dataSource=e.value)})}displayedColumns=["id","img","name","code","key","status","purchasePrice","salePrice","acciones"];static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-product"]],viewQuery:function(t,a){if(t&1&&(B(yt,5),B(Be,5)),t&2){let s;O(s=V())&&(a.sidenav=s.first),O(s=V())&&(a.paginator=s.first)}},standalone:!0,features:[h],decls:39,vars:9,consts:[[1,"list-inputs"],[3,"startDateChange","endDateChange","startDate","endDate"],[3,"searchChange","searchMessage"],["type","button",1,"btn-add",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["class","itemHeader","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","img"],["matColumnDef","name"],["matColumnDef","code"],["matColumnDef","key"],["matColumnDef","status"],["matColumnDef","purchasePrice"],["matColumnDef","salePrice"],["matColumnDef","acciones"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSizeOptions"],["mat-header-cell","",1,"itemHeader"],["mat-cell",""],["alt","",1,"imgFoto",3,"src"],["mat-cell","",1,"actions-cell"],[1,"actions-container"],["mat-icon-button","",1,"btnVer",3,"click"],["mat-icon-button","",1,"btnEditar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){t&1&&(o(0,"div",0)(1,"app-date-start-end",1),Le("startDateChange",function(C){return ke(a.selectedStartDate,C)||(a.selectedStartDate=C),C})("endDateChange",function(C){return ke(a.selectedEndDate,C)||(a.selectedEndDate=C),C}),n(),o(2,"app-input-search",2),f("searchChange",function(C){return a.onSearch(C)}),n(),o(3,"button",3),f("click",function(){return a.onOpenModal()}),o(4,"mat-icon"),r(5,"add"),n()()(),o(6,"div",4)(7,"div",5)(8,"table",6),g(9,7),c(10,Mt,2,0,"th",8)(11,Et,2,1,"td",9),v(),g(12,10),c(13,xt,2,0,"th",8)(14,It,2,1,"td",9),v(),g(15,11),c(16,Pt,2,0,"th",8)(17,At,2,1,"td",9),v(),g(18,12),c(19,Tt,2,0,"th",8)(20,Ft,2,1,"td",9),v(),g(21,13),c(22,Rt,2,0,"th",8)(23,kt,2,1,"td",9),v(),g(24,14),c(25,Nt,2,0,"th",8)(26,Vt,4,1,"td",9),v(),g(27,15),c(28,Ht,2,0,"th",8)(29,jt,2,1,"td",9),v(),g(30,16),c(31,$t,2,0,"th",8)(32,qt,2,1,"td",9),v(),g(33,17),c(34,Lt,2,0,"th",8)(35,Gt,8,0,"td",18),v(),c(36,Qt,1,0,"tr",19)(37,Wt,1,0,"tr",20),n(),d(38,"mat-paginator",21),n()()),t&2&&(l(),qe("startDate",a.selectedStartDate)("endDate",a.selectedEndDate),l(),m("searchMessage",a.searchMessage),l(6),m("dataSource",a.dataSource),l(28),m("matHeaderRowDef",a.displayedColumns),l(),m("matRowDefColumns",a.displayedColumns),l(),m("length",a.totalItems)("pageSizeOptions",Ge(8,wt)))},dependencies:[re,K,Y,ie,Z,X,oe,ee,te,ne,ae,x,be,Ye,U,I,Be,ot,nt],styles:[".list-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;margin:0 0 20px;gap:10px}.custom-dialog-container[_ngcontent-%COMP%]{background-color:red!important;padding:30px;width:30px!important}"]})};var _e=class i{constructor(e){this.data=e;this.isEditMode=!!e.payload,this.loginForm=this._fb.group({nombre:[e.payload?.name||"",[b.required]],descripcion:[e.payload?.description||"",[b.required]]})}sBaseApi=p(S);sSweetAlert=p(D);_MatDialgoRef=p(A);_fb=p(L);isEditMode;loginForm;ngOnInit(){}onSubmit(){if(this.loginForm.valid){this.sSweetAlert.showLoading();let e={Name:this.loginForm.get("nombre")?.value,Description:this.loginForm.get("descripcion")?.value};if(this.isEditMode){let t=this.data.payload.id;t>0&&this.sBaseApi.updateItem("Category",e,t).subscribe(a=>{a.isSuccess?(this.sSweetAlert.closeLoading(),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(a.error||"Error  al editar el categoria")})}else this.sBaseApi.addItem("Category",e).subscribe(t=>{t.isSuccess?(this.sSweetAlert.closeLoading(),this._MatDialgoRef.close(!0)):this.sSweetAlert.showError(t.error||"Error al crear la categoria")})}else this.sSweetAlert.showError("Campos requeridos")}getFormControl(e){let t=this.loginForm.get(e);return t instanceof j?t:null}onCloseModal(){this._MatDialgoRef.close()}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=_({type:i,selectors:[["app-categoria-popup"]],standalone:!0,features:[h],decls:13,vars:4,consts:[["mat-dialog-title","",1,""],[1,"mat-typography","w-full"],[3,"formGroup"],[1,"flex","flex-wrap","md:mb-6"],[1,"w-full","md:w-1/2","px-3","mb-6","md:mb-0","sm:w-full"],["label","Nombre:*","type","text","placeholder","Ingrese el nombre",3,"control"],[1,"w-full","px-3","mb-6","md:mb-0","sm:w-full"],["label","Descripcion:*","placeholder","Ingrese la descipcion",3,"control"],["align","end"],[3,"click"]],template:function(t,a){t&1&&(o(0,"h2",0),r(1),n(),o(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"div",4),d(6,"app-input-field",5),n()(),o(7,"div",3)(8,"div",6),d(9,"app-input-text-area",7),n()()()(),o(10,"mat-dialog-actions",8)(11,"app-btn-close",9),f("click",function(){return a.onCloseModal()}),n(),o(12,"app-btn-accept",9),f("click",function(){return a.onSubmit()}),n()()),t&2&&(l(),u(a.isEditMode?"Editar categoria":"Crear nueva categoria"),l(2),m("formGroup",a.loginForm),l(3),m("control",a.getFormControl("nombre")),l(3),m("control",a.getFormControl("descripcion")))},dependencies:[U,W,J,z,pe,se,le,me,N,$,H,q,ue]})};var Ae=class i{id;closeSidenav=new je;categoriaDetail;close(){console.log("sii"),this.closeSidenav.emit()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-categoria-detail-popup"]],inputs:{id:"id"},outputs:{closeSidenav:"closeSidenav"},standalone:!0,features:[h],decls:18,vars:2,consts:[[1,"p-4"],[1,"w-full","flex","flex-row","justify-between","items-center"],[1,"text-15"],[3,"click"],[1,"text-blue-500","hover:text-blue-300"],[1,"mt-6","p-3","flex","flex-col","gap-3"],[1,"w-full","flex","flex-col"],[1,"title"],[1,"text-content"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),r(3,"Detalle de la categoria"),n(),o(4,"button",3),f("click",function(){return a.close()}),o(5,"mat-icon",4),r(6,"close"),n()()(),o(7,"div",5)(8,"div",6)(9,"span",7),r(10,"id de lacategoria"),n(),o(11,"p",8),r(12),n(),o(13,"div",6)(14,"span",7),r(15,"nombre de la categoria"),n(),o(16,"p",8),r(17),n()()()()()),t&2&&(l(12),u(a.categoriaDetail==null?null:a.categoriaDetail.id),l(5),u(a.categoriaDetail==null?null:a.categoriaDetail.name))},dependencies:[I,ce,x,de]})};var Jt=["sidenav"];function Kt(i,e){i&1&&(o(0,"th",17),r(1,"Id"),n())}function Xt(i,e){if(i&1&&(o(0,"td",18),r(1),n()),i&2){let t=e.$implicit;l(),E(" ",t.id," ")}}function Yt(i,e){i&1&&(o(0,"th",17),r(1," Nombre de categoria "),n())}function Zt(i,e){if(i&1&&(o(0,"td",18),r(1),n()),i&2){let t=e.$implicit;l(),E(" ",t.name," ")}}function ei(i,e){i&1&&(o(0,"th",17),r(1," Desripcion de la categoria "),n())}function ti(i,e){if(i&1&&(o(0,"td",18),r(1),n()),i&2){let t=e.$implicit;l(),E(" ",t.description," ")}}function ii(i,e){i&1&&(o(0,"th",17),r(1,"acciones"),n())}function oi(i,e){if(i&1){let t=k();o(0,"td",19)(1,"div",20)(2,"button",21),f("click",function(){let s=y(t).$implicit,C=M();return w(C.onEdit(s))}),o(3,"mat-icon"),r(4,"edit"),n()(),o(5,"button",22),f("click",function(){let s=y(t).$implicit,C=M();return w(C.onDelete(s.id))}),o(6,"mat-icon"),r(7,"delete"),n()()()()}}function ni(i,e){i&1&&d(0,"tr",23)}function ai(i,e){i&1&&d(0,"tr",24)}var Te=class i{sBaseApi=p(S);displayedColumns=["id","name","description","acciones"];sTitle=p(G);_matDialog=p(Q);searchMessage="Buscar categor\xEDa";dataSource;selectedId;sidenav;isOpen=!1;sSweetalert=p(D);ngOnInit(){this.sTitle.setTitle("Categorias de productos"),this.getAllCategoria()}onSearch(e){}onViewDetails(e){this.selectedId=e,this.sidenav?this.sidenav.open():console.error("El sidenav no est\xE1 definido.")}onOpenModal(){this._matDialog.open(_e,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{}}).afterClosed().subscribe(e=>{e&&this.getAllCategoria()})}toggleDropdown(e){let t=e.target.nextElementSibling;t&&t.classList.toggle("show")}closeModal(){this.isOpen=!1}onDelete(e){this.sSweetalert.showConfirmation(`Quieres eliminar la categoria: ${e}`,()=>{this.sBaseApi.removeItem("Category",e).subscribe(t=>{t.isSuccess?(this.sSweetalert.showSuccess("Categoria eliminada"),this.getAllCategoria()):this.sSweetalert.showError(t.error||"Hubo un errro al eliminar la categoria ")})})}onEdit(e){this._matDialog.open(_e,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{payload:e}}).afterClosed().subscribe(t=>{t&&this.getAllCategoria()})}closeSidenav(){this.sidenav.close()}getAllCategoria(){this.sBaseApi.getItems("Category").subscribe(e=>{e.isSuccess&&(this.dataSource=e.value)})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-categoria"]],viewQuery:function(t,a){if(t&1&&B(Jt,5),t&2){let s;O(s=V())&&(a.sidenav=s.first)}},standalone:!0,features:[h],decls:24,vars:5,consts:[["sidenav",""],[1,"flex","flex-wrap","justify-end","gap-2","mb-4"],["type","button",1,"btn-add",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["class","itemHeader","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","acciones"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","over","position","end",1,"custom-sidenav",3,"opened"],[3,"closeSidenav","id"],["mat-header-cell","",1,"itemHeader"],["mat-cell",""],["mat-cell","",1,"actions-cell"],[1,"actions-container"],["mat-icon-button","",1,"btnEditar",3,"click"],["mat-icon-button","",1,"btnEliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){if(t&1){let s=k();o(0,"div",1)(1,"button",2),f("click",function(){return y(s),w(a.onOpenModal())}),o(2,"mat-icon"),r(3,"add"),n()()(),o(4,"div",3)(5,"div",4)(6,"table",5),g(7,6),c(8,Kt,2,0,"th",7)(9,Xt,2,1,"td",8),v(),g(10,9),c(11,Yt,2,0,"th",7)(12,Zt,2,1,"td",8),v(),g(13,10),c(14,ei,2,0,"th",7)(15,ti,2,1,"td",8),v(),g(16,11),c(17,ii,2,0,"th",7)(18,oi,8,0,"td",12),v(),c(19,ni,1,0,"tr",13)(20,ai,1,0,"tr",14),n()()(),o(21,"mat-sidenav",15,0)(23,"app-categoria-detail-popup",16),f("closeSidenav",function(){return y(s),w(a.closeSidenav())}),n()()}t&2&&(l(6),m("dataSource",a.dataSource),l(13),m("matHeaderRowDef",a.displayedColumns),l(),m("matRowDefColumns",a.displayedColumns),l(),m("opened",!1),l(2),m("id",a.selectedId))},dependencies:[x,re,K,Y,ie,Z,X,oe,ee,te,ne,ae,I,ye,Ae]})};var he=class i{constructor(e){this.data=e;this.isEditMode=!!e.payload,this.unitForm=this._fb.group({name:[e.payload?.name||"",[b.required]],abbreviation:[e.payload?.abbreviation||"",[b.required]],description:[e.payload?.description||"",[b.required]]})}sBaseApi=p(S);sSweetAlert=p(D);_MatDialgoRef=p(A);_fb=p(L);isEditMode;unitForm;ngOnInit(){}onSubmit(){if(this.unitForm.valid){this.sSweetAlert.showLoading();let e={name:this.unitForm.get("name")?.value,abbreviation:this.unitForm.get("abbreviation")?.value,description:this.unitForm.get("description")?.value};this.sBaseApi.addItem("unitOfMeasure",e).subscribe(t=>{this.sSweetAlert.closeLoading(),t.isSuccess?this._MatDialgoRef.close(!0):this.sSweetAlert.showError(t.error||"Error al crear la unidad de medida")},t=>{this.sSweetAlert.closeLoading(),console.error("Error al crear:",t),this.sSweetAlert.showError("Error al crear la unidad de medida: "+t.message)})}else this.sSweetAlert.showError("Por favor, completa todos los campos requeridos.")}getFormControl(e){let t=this.unitForm.get(e);return t instanceof j?t:null}onCloseModal(){this._MatDialgoRef.close()}static \u0275fac=function(t){return new(t||i)(P(T))};static \u0275cmp=_({type:i,selectors:[["app-unitofmeasure-popup"]],standalone:!0,features:[h],decls:16,vars:5,consts:[["mat-dialog-title","",1,""],[1,"mat-typography","w-full"],[3,"formGroup"],[1,"flex","flex-wrap","md:mb-6"],[1,"w-full","md:w-1/2","px-3","mb-6","md:mb-0","sm:w-full"],["label","Nombre:*","type","text","placeholder","Ingrese el nombre",3,"control"],["label","Abreviatura:*","type","text","placeholder","Ingrese la abreviatura",3,"control"],[1,"w-full","px-3","mb-6","md:mb-0","sm:w-full"],["label","Descripci\xF3n:*","placeholder","Ingrese la descripci\xF3n",3,"control"],["align","end"],[3,"click"]],template:function(t,a){t&1&&(o(0,"h2",0),r(1),n(),o(2,"mat-dialog-content",1)(3,"form",2)(4,"div",3)(5,"div",4),d(6,"app-input-field",5),n()(),o(7,"div",3)(8,"div",4),d(9,"app-input-field",6),n()(),o(10,"div",3)(11,"div",7),d(12,"app-input-text-area",8),n()()()(),o(13,"mat-dialog-actions",9)(14,"app-btn-close",10),f("click",function(){return a.onCloseModal()}),n(),o(15,"app-btn-accept",10),f("click",function(){return a.onSubmit()}),n()()),t&2&&(l(),u(a.isEditMode?"Crear Unidad de Medida":""),l(2),m("formGroup",a.unitForm),l(3),m("control",a.getFormControl("name")),l(3),m("control",a.getFormControl("abbreviation")),l(3),m("control",a.getFormControl("description")))},dependencies:[U,W,J,z,pe,se,le,me,N,$,H,q]})};var ri=["sidenav"];function li(i,e){i&1&&(o(0,"th",18),r(1,"Id"),n())}function mi(i,e){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let t=e.$implicit;l(),E(" ",t.id," ")}}function pi(i,e){i&1&&(o(0,"th",18),r(1," Nombre de la Unidad "),n())}function si(i,e){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let t=e.$implicit;l(),E(" ",t.name," ")}}function di(i,e){i&1&&(o(0,"th",18),r(1," Abreviaci\xF3n "),n())}function ci(i,e){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let t=e.$implicit;l(),E(" ",t.abbreviation," ")}}function ui(i,e){i&1&&(o(0,"th",18),r(1," Descripci\xF3n "),n())}function fi(i,e){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let t=e.$implicit;l(),E(" ",t.description," ")}}function gi(i,e){i&1&&(o(0,"th",18),r(1," Productos "),n())}function vi(i,e){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let t=e.$implicit;l(),E(" ",t.products," ")}}function Ci(i,e){i&1&&(o(0,"th",18),r(1," Acciones "),n())}function _i(i,e){if(i&1){let t=k();o(0,"td",20)(1,"div",21)(2,"button",22),f("click",function(){let s=y(t).$implicit,C=M();return w(C.onDelete(s))}),o(3,"mat-icon"),r(4,"delete"),n()()()()}}function hi(i,e){i&1&&d(0,"tr",23)}function Si(i,e){i&1&&d(0,"tr",24)}var Fe=class i{sBaseApi=p(S);sTitle=p(G);sSweetalert=p(D);_matDialog=p(Q);displayedColumns=["id","name","abbreviation","description","acciones"];dataSource=new we([]);selectedUnitOfMeasure=null;searchMessage="Buscar unidad de medida";sidenav;ngOnInit(){this.sTitle.setTitle("Unidades de Medida"),this.getAllUnitsOfMeasure()}getAllUnitsOfMeasure(){this.sBaseApi.getItems("unitOfMeasure").subscribe(e=>{e.isSuccess&&(this.dataSource.data=e.value)})}onSearch(e){console.log(e)}onViewDetails(e){this.selectedUnitOfMeasure=e,this.sidenav?this.sidenav.open():console.error("El sidenav no est\xE1 definido.")}onOpenModal(){this._matDialog.open(he,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{title:"Agregar Unidad de Medida",payload:{id:0,name:"",abbreviation:"",description:"",products:""}}}).afterClosed().subscribe(e=>{e&&this.getAllUnitsOfMeasure()})}onEdit(e){this._matDialog.open(he,{width:"60vw",maxWidth:"60vw",disableClose:!0,data:{title:"Editar Unidad de Medida",payload:He({},e)}}).afterClosed().subscribe(t=>{t&&this.getAllUnitsOfMeasure()})}onDelete(e){this.sSweetalert.showConfirmation(`\xBFQuieres eliminar la unidad de medida: ${e.name}?`,()=>{this.sBaseApi.removeItem("unitOfMeasure",e.id).subscribe(t=>{t.isSuccess?(this.sSweetalert.showSuccess("Unidad de medida eliminada"),this.getAllUnitsOfMeasure()):this.sSweetalert.showError("Error al eliminar la unidad de medida")})})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-unitofmeasurements"]],viewQuery:function(t,a){if(t&1&&B(ri,5),t&2){let s;O(s=V())&&(a.sidenav=s.first)}},standalone:!0,features:[h],decls:30,vars:4,consts:[["sidenav",""],[1,"flex","flex-wrap","justify-end","gap-2","mb-4"],["type","button",1,"btn-add",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"example-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","id"],["class","itemHeader","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","abbreviation"],["matColumnDef","description"],["matColumnDef","products"],["matColumnDef","acciones"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mode","over","position","end",1,"custom-sidenav",3,"opened"],["mat-header-cell","",1,"itemHeader"],["mat-cell",""],["mat-cell","",1,"actions-cell"],[1,"actions-container"],["mat-icon-button","",1,"btnEliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){if(t&1){let s=k();o(0,"div",1)(1,"button",2),f("click",function(){return y(s),w(a.onOpenModal())}),o(2,"mat-icon"),r(3,"add"),n()()(),o(4,"div",3)(5,"div",4)(6,"table",5),g(7,6),c(8,li,2,0,"th",7)(9,mi,2,1,"td",8),v(),g(10,9),c(11,pi,2,0,"th",7)(12,si,2,1,"td",8),v(),g(13,10),c(14,di,2,0,"th",7)(15,ci,2,1,"td",8),v(),r(16,"s "),g(17,11),c(18,ui,2,0,"th",7)(19,fi,2,1,"td",8),v(),g(20,12),c(21,gi,2,0,"th",7)(22,vi,2,1,"td",8),v(),g(23,13),c(24,Ci,2,0,"th",7)(25,_i,5,0,"td",14),v(),c(26,hi,1,0,"tr",15)(27,Si,1,0,"tr",16),n()()(),d(28,"mat-sidenav",17,0)}t&2&&(l(6),m("dataSource",a.dataSource),l(20),m("matHeaderRowDef",a.displayedColumns),l(),m("matRowDefColumns",a.displayedColumns),l(),m("opened",!1))},dependencies:[x,re,K,Y,ie,Z,X,oe,ee,te,ne,ae,I,ye]})};var Qa=[{path:"producto",component:Pe,canActivate:[()=>p(ge).isTokenExpired()?(p(fe).navigate(["/iniciarSesion"]),!1):!0]},{path:"proveedores",component:xe,canActivate:[()=>p(ge).isTokenExpired()?(p(fe).navigate(["/iniciarSesion"]),!1):!0]},{path:"categorias",component:Te,canActivate:[()=>p(ge).isTokenExpired()?(p(fe).navigate(["/iniciarSesion"]),!1):!0]},{path:"unidades",component:Fe,canActivate:[()=>p(ge).isTokenExpired()?(p(fe).navigate(["/iniciarSesion"]),!1):!0]},{path:"",redirectTo:"producto",pathMatch:"full"}];export{Qa as CATALOGO_ROUTES};
